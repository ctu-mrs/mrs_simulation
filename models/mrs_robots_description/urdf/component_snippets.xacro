<?xml version="1.0"?>

<!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
<!-- !!    THIS DOCUMENT CONTAINS ONLY COMMON COMPONENTS MACRO AND    !! -->
<!-- !!    PARAMETERS DEFINITIONS. IT SHOULD NOT CONTAIN ANY          !! -->
<!-- !!                  ARGUMENTS "$(arg ...)"                       !! -->
<!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->

<!-- License {-->
<!--
Copyright 2015 Fadri Furrer, ASL, ETH Zurich, Switzerland
Copyright 2015 Michael Burri, ASL, ETH Zurich, Switzerland
Copyright 2015 Mina Kamel, ASL, ETH Zurich, Switzerland
Copyright 2015 Janosch Nikolic, ASL, ETH Zurich, Switzerland
Copyright 2015 Markus Achtelik, ASL, ETH Zurich, Switzerland

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<!--}-->

<robot xmlns:xacro="http://ros.org/wiki/xacro">

  <!-- Math constants {-->
  <!-- Functions and constants from the python math module (e.g. pi and trigonometric functions) are available for use -->

  <xacro:property name="rad0" value="0" />
  <xacro:property name="rad10" value="${10*pi/180}" />
  <xacro:property name="rad20" value="${20*pi/180}" />
  <xacro:property name="rad30" value="${30*pi/180}" />
  <xacro:property name="rad45" value="${45*pi/180}" />
  <xacro:property name="rad60" value="${60*pi/180}" />
  <xacro:property name="rad65" value="${65*pi/180}" />
  <xacro:property name="rad70" value="${70*pi/180}" />
  <xacro:property name="rad85" value="${85*pi/180}" />
  <xacro:property name="rad90" value="${90*pi/180}" />
  <xacro:property name="rad95" value="${95*pi/180}" />
  <xacro:property name="rad115" value="${115*pi/180}" />
  <xacro:property name="rad135" value="${135*pi/180}" />
  <xacro:property name="rad150" value="${150*pi/180}" />
  <xacro:property name="rad180" value="${180*pi/180}" />
  <xacro:property name="rad210" value="${210*pi/180}" />

  <xacro:property name="sin30" value="${sin(rad30)}" />
  <xacro:property name="sin45" value="${sin(rad45)}" />
  <xacro:property name="sin60" value="${sin(rad60)}" />
  <xacro:property name="sin90" value="${sin(rad90)}" />

  <xacro:property name="cos30" value="${cos(rad30)}" />
  <xacro:property name="cos45" value="${cos(rad45)}" />
  <xacro:property name="cos60" value="${cos(rad60)}" />
  <xacro:property name="cos90" value="${cos(rad90)}" />

  <xacro:property name="sqrt2" value="${sqrt(2)}" />
  <!--}-->

  <!-- ================================================================== -->
  <!-- ||   generic macro definitions (visualization, collision ...)   || -->
  <!-- ================================================================== -->

  <!--  {-->

  <!-- Macro for visualization of mash {-->
  <xacro:macro name="visual_macro"
    params="robot_namespace name mesh_file mesh_scale color parent *origin">
    <joint name="${name}_joint" type="fixed">
      <xacro:insert_block name="origin" />
      <parent link="${parent}" />
      <child link="${name}_link" />
    </joint>

    <link name="${name}_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="${mesh_file}" scale="${mesh_scale}" />
        </geometry>
      </visual>
    </link>
    <gazebo reference="${name}_link">
      <material>Gazebo/${color}</material>
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Macro for visualization of textured mash {-->
  <xacro:macro name="textured_visual_macro"
    params="robot_namespace name mesh_file mesh_scale parent *origin">
    <joint name="${name}_joint" type="fixed">
      <xacro:insert_block name="origin" />
      <parent link="${parent}" />
      <child link="${name}_link" />
    </joint>

    <link name="${name}_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="${mesh_file}" scale="${mesh_scale}" />
        </geometry>
      </visual>
    </link>
  </xacro:macro>
  <!--}-->

 <!-- Macro for visualization of mash with collision {-->
  <xacro:macro name="visual_macro_with_collision"
    params="robot_namespace name mesh_file mesh_scale color parent *origin *collision">
    <joint name="${name}_joint" type="fixed">
      <xacro:insert_block name="origin" />
      <parent link="${parent}" />
      <child link="${name}_link" />
    </joint>
    <link name="${name}_link">
      <visual>
        <origin xyz="0 0 -0.015" rpy="0 0 0" />
        <geometry>
          <!-- <cylinder length="0.03" radius="0.02" /> -->
          <mesh filename="{mesh_file}" scale="${mesh_scale}" />
        </geometry>
      </visual>
      <xacro:insert_block name="collision" />
    </link>
    <gazebo reference="${name}_link">
      <material>Gazebo/${color}</material>
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Macro for visualization of common geometry type {-->
  <xacro:macro name="visual_macro_common_geometry_type"
    params="robot_namespace name color parent *origin *geometry">
    <joint name="${name}_joint" type="fixed">
      <xacro:insert_block name="origin" />
      <parent link="${parent}" />
      <child link="${name}_link" />
    </joint>

    <link name="${name}_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <xacro:insert_block name="geometry" />
      </visual>
    </link>
    <gazebo reference="${name}_link">
      <material>Gazebo/${color}</material>
    </gazebo>
  </xacro:macro>
  <!--}-->

 <!-- Macro for just collision {-->
  <xacro:macro name="collision_macro"
    params="robot_namespace name parent *origin *collision">
    <joint name="${name}_joint" type="fixed">
      <xacro:insert_block name="origin" />
      <parent link="${parent}" />
      <child link="${name}_link" />
    </joint>
    <link name="${name}_link">
      <xacro:insert_block name="collision" />
    </link>
  </xacro:macro>
  <!--}-->

 <!-- Macro for leg {-->
  <xacro:macro name="leg_macro"
    params="robot_namespace name mesh_file mesh_scale color parent *origin *collision">
    <joint name="${name}_clip_joint" type="fixed">
      <xacro:insert_block name="origin" />
      <parent link="${parent}" />
      <child link="${name}_clip_link" />
    </joint>
    <link name="${name}_clip_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="${mesh_file}"
            scale="${mesh_scale}" />
        </geometry>
      </visual>
      <xacro:insert_block name="collision" />
    </link>
    <gazebo reference="${name}_clip_link">
      <material>Gazebo/${color}</material>
      <collision name='${name}_clip_link_collision'>
        <surface>
          <contact>
            <ode>
              <min_depth>0.001</min_depth>
              <max_vel>0.0</max_vel>
            </ode>
          </contact>
          <friction>
            <ode/>
          </friction>
        </surface>
      </collision>
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Macro for rotor {-->
  <xacro:macro name="vertical_rotor"
    params="robot_namespace suffix direction motor_constant moment_constant parent mass_rotor radius_rotor time_constant_up time_constant_down max_rot_velocity motor_number rotor_drag_coefficient rolling_moment_coefficient color mesh_file mesh_scale *origin *inertia">
    <joint name="rotor_${motor_number}_joint" type="continuous">
      <xacro:insert_block name="origin" />
      <axis xyz="0 0 1" />
      <parent link="${parent}" />
      <child link="rotor_${motor_number}" />
    </joint>
    <link name="rotor_${motor_number}">
      <inertial>
        <mass value="${mass_rotor}" /> <!-- [kg] -->
        <xacro:insert_block name="inertia" />
      </inertial>
      <visual>
        <geometry>
          <mesh filename="${mesh_file}" scale="${mesh_scale}" />
        </geometry>
      </visual>
      <collision>
        <geometry>
          <cylinder length="0.005" radius="${radius_rotor}" /> <!-- [m] -->
        </geometry>
      </collision>
    </link>
    <gazebo>
      <plugin name="${suffix}_motor_model" filename="libgazebo_motor_model.so">
        <robotNamespace>${robot_namespace}</robotNamespace>
        <jointName>rotor_${motor_number}_joint</jointName>
        <linkName>rotor_${motor_number}</linkName>
        <turningDirection>${direction}</turningDirection>
        <timeConstantUp>${time_constant_up}</timeConstantUp>
        <timeConstantDown>${time_constant_down}</timeConstantDown>
        <maxRotVelocity>${max_rot_velocity}</maxRotVelocity>
        <motorConstant>${motor_constant}</motorConstant>
        <momentConstant>${moment_constant}</momentConstant>
        <commandSubTopic>/gazebo/command/motor_speed</commandSubTopic>
        <motorNumber>${motor_number}</motorNumber>
        <rotorDragCoefficient>${rotor_drag_coefficient}</rotorDragCoefficient>
        <rollingMomentCoefficient>${rolling_moment_coefficient}</rollingMomentCoefficient>
        <motorSpeedPubTopic>/motor_speed/${motor_number}</motorSpeedPubTopic>
        <rotorVelocitySlowdownSim>${rotor_velocity_slowdown_sim}</rotorVelocitySlowdownSim>
      </plugin>
    </gazebo>
    <gazebo reference="rotor_${motor_number}">
      <material>Gazebo/${color}</material>
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Macro for textured rotor {-->
  <xacro:macro name="textured_vertical_rotor"
    params="robot_namespace suffix direction motor_constant moment_constant parent mass_rotor radius_rotor time_constant_up time_constant_down max_rot_velocity motor_number rotor_drag_coefficient rolling_moment_coefficient mesh_file mesh_scale *origin *inertia">
    <joint name="rotor_${motor_number}_joint" type="continuous">
      <xacro:insert_block name="origin" />
      <axis xyz="0 0 1" />
      <parent link="${parent}" />
      <child link="rotor_${motor_number}" />
    </joint>
    <link name="rotor_${motor_number}">
      <inertial>
        <mass value="${mass_rotor}" /> <!-- [kg] -->
        <xacro:insert_block name="inertia" />
      </inertial>
      <visual>
        <geometry>
          <mesh filename="${mesh_file}" scale="${mesh_scale}" />
        </geometry>
      </visual>
      <collision>
        <geometry>
          <cylinder length="0.005" radius="${radius_rotor}" /> <!-- [m] -->
        </geometry>
      </collision>
    </link>
    <gazebo>
      <plugin name="${suffix}_motor_model" filename="libgazebo_motor_model.so">
        <robotNamespace>${robot_namespace}</robotNamespace>
        <jointName>rotor_${motor_number}_joint</jointName>
        <linkName>rotor_${motor_number}</linkName>
        <turningDirection>${direction}</turningDirection>
        <timeConstantUp>${time_constant_up}</timeConstantUp>
        <timeConstantDown>${time_constant_down}</timeConstantDown>
        <maxRotVelocity>${max_rot_velocity}</maxRotVelocity>
        <motorConstant>${motor_constant}</motorConstant>
        <momentConstant>${moment_constant}</momentConstant>
        <commandSubTopic>/gazebo/command/motor_speed</commandSubTopic>
        <motorNumber>${motor_number}</motorNumber>
        <rotorDragCoefficient>${rotor_drag_coefficient}</rotorDragCoefficient>
        <rollingMomentCoefficient>${rolling_moment_coefficient}</rollingMomentCoefficient>
        <motorSpeedPubTopic>/motor_speed/${motor_number}</motorSpeedPubTopic>
        <rotorVelocitySlowdownSim>${rotor_velocity_slowdown_sim}</rotorVelocitySlowdownSim>
      </plugin>
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Macro for main multirotor link {-->
  <xacro:macro name="multirotor_base_macro"
    params="robot_namespace mass body_width body_height mesh_file mesh_scale color *inertia">
    <link name="base_link">
      <origin xyz="0 0 0" rpy="0 0 0" />
    </link>

    <joint name="base_joint" type="fixed">
      <origin xyz="0 0 0" rpy="0 0 0" />
      <parent link="base_link" />
      <child link="base_link_inertia" />
    </joint>

    <link name="base_link_inertia">
      <inertial>
        <mass value="${mass}" />  <!-- [kg] -->
        <origin xyz="0 0 0" />
        <xacro:insert_block name="inertia" />
      </inertial>

      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="${mesh_file}" scale="${mesh_scale}" />
          <!-- <box size="${body_width} ${body_width} ${body_height}"/> --> <!-- [m] [m] [m] -->
        </geometry>
      </visual>

      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <box size="${body_width} ${body_width} ${body_height}" /> <!-- [m] [m] [m] -->
        </geometry>
      </collision>
    </link>

    <!-- attach multirotor_base_plugin to the base_link -->
    <gazebo>
      <plugin filename="libgazebo_multirotor_base_plugin.so" name="rosbag">
        <robotNamespace>${robot_namespace}</robotNamespace>
        <linkName>base_link</linkName>
        <rotorVelocitySlowdownSim>${rotor_velocity_slowdown_sim}</rotorVelocitySlowdownSim>
      </plugin>
    </gazebo>
    <gazebo reference="base_link">
      <material>Gazebo/${color}</material>
      <collision name='base_link_inertia_collision'>
        <surface>
          <contact>
            <ode>
              <min_depth>0.001</min_depth>
              <max_vel>0.0</max_vel>
            </ode>
          </contact>
          <friction>
            <ode/>
          </friction>
        </surface>
      </collision>
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Macro for main multirotor without mesh for simplier physics{-->
  <xacro:macro name="multirotor_base_without_mesh_macro"
    params="robot_namespace mass body_radius body_height *inertia">
    <link name="base_link"></link>

    <joint name="base_joint" type="fixed">
      <origin xyz="0 0 0" rpy="0 0 0" />
      <parent link="base_link" />
      <child link="base_link_inertia" />
    </joint>

    <link name="base_link_inertia">
      <inertial>
        <mass value="${mass}" />  <!-- [kg] -->
        <origin xyz="0 0 0" />
        <xacro:insert_block name="inertia" />
      </inertial>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <cylinder length="${body_height}" radius="${body_radius}" />
        </geometry>
      </collision>
    </link>

    <!-- attach multirotor_base_plugin to the base_link -->
    <gazebo>
      <plugin filename="libgazebo_multirotor_base_plugin.so" name="rosbag">
        <robotNamespace>${robot_namespace}</robotNamespace>
        <linkName>base_link</linkName>
        <rotorVelocitySlowdownSim>${rotor_velocity_slowdown_sim}</rotorVelocitySlowdownSim>
      </plugin>
    </gazebo>
    <gazebo reference="base_link">
      <collision name='base_link_inertia_collision'>
        <surface>
          <contact>
            <ode>
              <min_depth>0.001</min_depth>
              <max_vel>0.0</max_vel>
            </ode>
          </contact>
          <friction>
            <ode/>
          </friction>
        </surface>
      </collision>
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Macro for calculating inertia of cylinder {-->
  <xacro:macro name="cylinder_inertia" params="m r h">
    <inertia ixx="${m*(3*r*r+h*h)/12}" ixy="0" ixz="0" iyy="${m*(3*r*r+h*h)/12}" iyz="0" izz="${m*r*r/2}"/>
  </xacro:macro>
  <!--}-->

  <!--}-->

  <!-- ================================================================== -->
  <!-- ||  generic sensor plugin definitions (camera, rangefinder ...) || -->
  <!-- ================================================================== -->

  <!--  {-->

  <!-- Macro to add the gps_plugin {-->
  <xacro:macro name="gps_plugin_macro" params="namespace gps_noise gps_indoor_jamming">
    <gazebo>
      <plugin name="gps_plugin" filename="libMRSGazeboGPSPlugin.so">
        <robotNamespace>${namespace}</robotNamespace>
        <gpsNoise>${gps_noise}</gpsNoise>
        <indoorJamming>${gps_indoor_jamming}</indoorJamming>
      </plugin>
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Macro to add the magnetometer_plugin{-->
  <xacro:macro name="magnetometer_plugin_macro" params="namespace pub_rate noise_density random_walk bias_correlation_time mag_topic">
    <gazebo>
      <plugin name="magnetometer_plugin" filename="libgazebo_magnetometer_plugin.so">
        <robotNamespace>${namespace}</robotNamespace>
        <pubRate>${pub_rate}</pubRate>
        <noiseDensity>${noise_density}</noiseDensity>
        <randomWalk>${random_walk}</randomWalk>
        <biasCorrelationTime>${bias_correlation_time}</biasCorrelationTime>
        <magTopic>${mag_topic}</magTopic>
      </plugin>
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Macro to add the barometer_plugin{-->
  <xacro:macro name="barometer_plugin_macro" params="namespace pub_rate baro_topic">
    <gazebo>
      <plugin name="barometer_plugin" filename="libgazebo_barometer_plugin.so">
        <robotNamespace>${namespace}</robotNamespace>
        <pubRate>${pub_rate}</pubRate>
        <baroTopic>${baro_topic}</baroTopic>
      </plugin>
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Macro to add the mavlink_interface_plugin{-->
  <xacro:macro name="mavlink_interface_macro" params="namespace imu_sub_topic gps_sub_topic mag_sub_topic baro_sub_topic mavlink_addr mavlink_udp_port mavlink_tcp_port serial_enabled serial_device baudrate qgc_addr qgc_udp_port sdk_addr sdk_udp_port hil_mode hil_state_level vehicle_is_tailsitter send_vision_estimation send_odometry enable_lockstep use_tcp">
    <gazebo>
      <plugin name="mavlink_interface" filename="libgazebo_mavlink_interface.so">
        <robotNamespace>${namespace}</robotNamespace>
        <imuSubTopic>${imu_sub_topic}</imuSubTopic>
        <gpsSubTopic>${gps_sub_topic}</gpsSubTopic>
        <magSubTopic>${mag_sub_topic}</magSubTopic>
        <baroSubTopic>${baro_sub_topic}</baroSubTopic>
        <mavlink_addr>${mavlink_addr}</mavlink_addr>
        <mavlink_udp_port>${mavlink_udp_port}</mavlink_udp_port>
        <mavlink_tcp_port>${mavlink_tcp_port}</mavlink_tcp_port>
        <serialEnabled>${serial_enabled}</serialEnabled>
        <serialDevice>${serial_device}</serialDevice>
        <baudRate>${baudrate}</baudRate>
        <qgc_addr>${qgc_addr}</qgc_addr>
        <qgc_udp_port>${qgc_udp_port}</qgc_udp_port>
        <sdk_addr>${sdk_addr}</sdk_addr>
        <sdk_udp_port>${sdk_udp_port}</sdk_udp_port>
        <hil_mode>${hil_mode}</hil_mode>
        <hil_state_level>${hil_state_level}</hil_state_level>
        <vehicle_is_tailsitter>${vehicle_is_tailsitter}</vehicle_is_tailsitter>
        <send_vision_estimation>${send_vision_estimation}</send_vision_estimation>
        <send_odometry>${send_odometry}</send_odometry>
        <enable_lockstep>${enable_lockstep}</enable_lockstep>
        <use_tcp>${use_tcp}</use_tcp>
        <motorSpeedCommandPubTopic>/gazebo/command/motor_speed</motorSpeedCommandPubTopic>
        <control_channels>
          <channel name="rotor1">
            <input_index>0</input_index>
            <input_offset>0</input_offset>
            <input_scaling>1</input_scaling>
            <zero_position_disarmed>0</zero_position_disarmed>
            <zero_position_armed>0.15</zero_position_armed>
            <joint_control_type>velocity</joint_control_type>
          </channel>
          <channel name="rotor2">
            <input_index>1</input_index>
            <input_offset>0</input_offset>
            <input_scaling>1</input_scaling>
            <zero_position_disarmed>0</zero_position_disarmed>
            <zero_position_armed>0.15</zero_position_armed>
            <joint_control_type>velocity</joint_control_type>
          </channel>
          <channel name="rotor3">
            <input_index>2</input_index>
            <input_offset>0</input_offset>
            <input_scaling>1</input_scaling>
            <zero_position_disarmed>0</zero_position_disarmed>
            <zero_position_armed>0.15</zero_position_armed>
            <joint_control_type>velocity</joint_control_type>
          </channel>
          <channel name="rotor4">
            <input_index>3</input_index>
            <input_offset>0</input_offset>
            <input_scaling>1</input_scaling>
            <zero_position_disarmed>0</zero_position_disarmed>
            <zero_position_armed>0.15</zero_position_armed>
            <joint_control_type>velocity</joint_control_type>
          </channel>
          <channel name="rotor5">
            <input_index>4</input_index>
            <input_offset>0</input_offset>
            <input_scaling>1</input_scaling>
            <zero_position_disarmed>0</zero_position_disarmed>
            <zero_position_armed>0.15</zero_position_armed>
            <joint_control_type>velocity</joint_control_type>
          </channel>
          <channel name="rotor6">
            <input_index>5</input_index>
            <input_offset>0</input_offset>
            <input_scaling>1</input_scaling>
            <zero_position_disarmed>0</zero_position_disarmed>
            <zero_position_armed>0.15</zero_position_armed>
            <joint_control_type>velocity</joint_control_type>
          </channel>
          <channel name="rotor7">
            <input_index>6</input_index>
            <input_offset>0</input_offset>
            <input_scaling>1</input_scaling>
            <zero_position_disarmed>0</zero_position_disarmed>
            <zero_position_armed>0.15</zero_position_armed>
            <joint_control_type>velocity</joint_control_type>
          </channel>
          <channel name="rotor8">
            <input_index>7</input_index>
            <input_offset>0</input_offset>
            <input_scaling>1</input_scaling>
            <zero_position_disarmed>0</zero_position_disarmed>
            <zero_position_armed>0.15</zero_position_armed>
            <joint_control_type>velocity</joint_control_type>
          </channel>
        </control_channels>
      </plugin>
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Macro to add the imu_plugin{-->
  <xacro:macro name="imu_plugin_macro"
    params="namespace imu_suffix parent_link imu_topic
    mass_imu_sensor gyroscope_noise_density gyroscopoe_random_walk
    gyroscope_bias_correlation_time gyroscope_turn_on_bias_sigma
    accelerometer_noise_density accelerometer_random_walk
    accelerometer_bias_correlation_time accelerometer_turn_on_bias_sigma
    *inertia *origin">
    <!-- IMU link -->
    <link name="${namespace}/imu${imu_suffix}_link">
      <inertial>
        <xacro:insert_block name="inertia" />
        <mass value="${mass_imu_sensor}" />  <!-- [kg] -->
        <origin xyz="0 0 0" rpy="0 0 0" />
      </inertial>
    </link>
    <!-- IMU joint -->
    <joint name="${namespace}/imu${imu_suffix}_joint" type="revolute">
      <xacro:insert_block name="origin" />
      <parent link="${parent_link}" />
      <child link="${namespace}/imu${imu_suffix}_link" />
      <limit upper="0" lower="0" effort="0" velocity="0" />
    </joint>
    <gazebo>
      <plugin filename="libgazebo_imu_plugin.so" name="rotors_gazebo_imu${imu_suffix}_plugin">
        <!-- A good description of the IMU parameters can be found in the kalibr documentation:
        https://github.com/ethz-asl/kalibr/wiki/IMU-Noise-Model-and-Intrinsics -->
        <robotNamespace>${namespace}</robotNamespace> <!-- (string, required): ros namespace in which the messages are published -->
        <linkName>${namespace}/imu${imu_suffix}_link</linkName> <!-- (string, required): name of the body which holds the IMU sensor -->
        <imuTopic>${imu_topic}</imuTopic> <!-- (string): name of the sensor output topic and prefix of service names (defaults to imu) -->
        <gyroscopeNoiseDensity>${gyroscope_noise_density}</gyroscopeNoiseDensity> <!-- Gyroscope noise density (two-sided spectrum) [rad/s/sqrt(Hz)] -->
        <gyroscopeRandomWalk>${gyroscopoe_random_walk}</gyroscopeRandomWalk> <!-- Gyroscope bias random walk [rad/s/s/sqrt(Hz)] -->
        <gyroscopeBiasCorrelationTime>${gyroscope_bias_correlation_time}</gyroscopeBiasCorrelationTime> <!-- Gyroscope bias correlation time constant [s] -->
        <gyroscopeTurnOnBiasSigma>${gyroscope_turn_on_bias_sigma}</gyroscopeTurnOnBiasSigma> <!-- Gyroscope turn on bias standard deviation [rad/s] -->
        <accelerometerNoiseDensity>${accelerometer_noise_density}</accelerometerNoiseDensity> <!-- Accelerometer noise density (two-sided spectrum) [m/s^2/sqrt(Hz)] -->
        <accelerometerRandomWalk>${accelerometer_random_walk}</accelerometerRandomWalk> <!-- Accelerometer bias random walk. [m/s^2/s/sqrt(Hz)] -->
        <accelerometerBiasCorrelationTime>${accelerometer_bias_correlation_time}</accelerometerBiasCorrelationTime> <!-- Accelerometer bias correlation time constant [s] -->
        <accelerometerTurnOnBiasSigma>${accelerometer_turn_on_bias_sigma}</accelerometerTurnOnBiasSigma> <!-- Accelerometer turn on bias standard deviation [m/s^2] -->
      </plugin>
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Macro to add the wind_plugin{-->
  <xacro:macro name="wind_plugin_macro"
    params="namespace xyz_offset wind_direction wind_force_mean
    wind_gust_direction wind_gust_duration wind_gust_start
    wind_gust_force_mean">
    <gazebo>
      <plugin filename="libgazebo_wind_plugin.so" name="wind_plugin">
        <frameId>base_link</frameId>
        <linkName>base_link</linkName>
        <robotNamespace>${namespace}</robotNamespace>
        <xyzOffset>${xyz_offset}</xyzOffset> <!-- [m] [m] [m] -->
        <windDirection>${wind_direction}</windDirection>
        <windForceMean>${wind_force_mean}</windForceMean> <!-- [N] -->
        <windGustDirection>${wind_gust_direction}</windGustDirection>
        <windGustDuration>${wind_gust_duration}</windGustDuration> <!-- [s] -->
        <windGustStart>${wind_gust_start}</windGustStart> <!-- [s] -->
        <windGustForceMean>${wind_gust_force_mean}</windGustForceMean> <!-- [N] -->
      </plugin>
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Macro to add the odometry_plugin{-->
  <xacro:macro name="odometry_plugin_macro"
    params="
    namespace odometry_sensor_suffix parent_link topic_name mass_odometry_sensor
    noise frame_name frame_rate xyz_offset rpy_offset *inertia *origin">
    <!-- odometry link -->
    <link name="${namespace}/odometry_sensor${odometry_sensor_suffix}_link">
      <inertial>
        <xacro:insert_block name="inertia" />
        <mass value="${mass_odometry_sensor}" />  <!-- [kg] -->
      </inertial>
    </link>
    <!-- odometry joint -->
    <joint name="${namespace}/odometry_sensor${odometry_sensor_suffix}_joint" type="revolute">
      <parent link="${parent_link}" />
      <xacro:insert_block name="origin" />
      <child link="${namespace}/odometry_sensor${odometry_sensor_suffix}_link" />
      <limit upper="0" lower="0" effort="0" velocity="0" />
    </joint>
    <gazebo>
      <plugin filename="libgazebo_ros_p3d.so" name="odometry_sensor${odometry_sensor_suffix}">
        <alwaysOn>true</alwaysOn>
        <updateRate>${frame_rate}</updateRate>
        <bodyName>${namespace}/odometry_sensor${odometry_sensor_suffix}_link</bodyName>
        <topicName>${topic_name}</topicName>
        <gaussianNoise>${noise}</gaussianNoise>
        <frameName>${frame_name}</frameName>
        <xyzOffset>${xyz_offset}</xyzOffset>
        <rpyOffset>${rpy_offset}</rpyOffset>
      </plugin>
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Macro to add the rangefinder_plugin {-->
  <xacro:macro name="rangefinder_macro"
    params="namespace parent_link rangefinder_suffix parent_frame_name rangefinder_frame_name topic
    frame_rate fov min_distance max_distance resolution noise
    x y z roll pitch yaw
    *visual name color">
    <link name="${namespace}/${name}_link">
      <xacro:insert_block name="visual" />
    </link>
    <joint name="${namespace}/${name}_joint" type="fixed">
      <origin xyz="${x} ${y} ${z}" rpy="${roll} ${pitch} ${yaw}"/>
      <parent link="${parent_link}" />
      <child link="${namespace}/${name}_link" />
    </joint>
    <gazebo reference="${namespace}/${name}_link">
      <sensor name="${name}" type='ray'>
        <update_rate>${frame_rate}</update_rate>
        <ray>
          <scan>
            <horizontal>
              <samples>5</samples>
              <resolution>1</resolution>
              <min_angle>-${fov/2}</min_angle>
              <max_angle>${fov/2}</max_angle>
            </horizontal>
            <vertical>
              <samples>5</samples>
              <resolution>1</resolution>
              <min_angle>-${fov/2}</min_angle>
              <max_angle>${fov/2}</max_angle>
            </vertical>
          </scan>
          <range>
            <min>${min_distance}</min>
            <max>${max_distance}</max>
            <resolution>${resolution}</resolution>
          </range>
        </ray>
        <plugin name='mrs_gazebo_rangefinder' filename='libMRSGazeboRangefinderPlugin.so'>
          <gaussianNoise>${noise}</gaussianNoise>
          <alwaysOn>true</alwaysOn>
          <updateRate>${frame_rate}</updateRate>
          <topicName>${topic}</topicName>
          <frameName>${rangefinder_frame_name}</frameName>
          <fov>${fov}</fov>
          <radiation>radiation</radiation>
          <parentFrameName>${parent_frame_name}</parentFrameName>
          <x>${x}</x>
          <y>${y}</y>
          <z>${z}</z>
          <roll>${roll}</roll>
          <pitch>${pitch}</pitch>
          <yaw>${yaw}</yaw>
        </plugin>
      </sensor>
    </gazebo>
    <gazebo reference="${namespace}/${name}_link">
      <material>Gazebo/${color}</material>
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Macro to add the depth_camera_plugin {-->
  <xacro:macro name="depth_camera_macro"
    params="namespace parent_link camera_suffix frame_rate
    horizontal_fov image_width image_height min_distance max_distance
    noise_mean noise_stddev *visual_body *visual_glass *origin frame_id">

    <!-- visual links and joints {-->
    <link name="${namespace}/camera_${camera_suffix}_link">
      <xacro:insert_block name="visual_body" />
    </link>

    <link name="${namespace}/camera_${camera_suffix}_infra1_link">
    </link>

    <link name="${namespace}/camera_${camera_suffix}_infra2_link">
    </link>

    <link name="${namespace}/camera_${camera_suffix}_glass_link">
      <xacro:insert_block name="visual_glass" />
    </link>

    <joint name="${namespace}/camera_${camera_suffix}_joint" type="fixed">
      <xacro:insert_block name="origin" />
      <parent link="${parent_link}" />
      <child link="${namespace}/camera_${camera_suffix}_link" />
    </joint>

    <joint name="${namespace}/camera_${camera_suffix}_infra1_joint" type="fixed">
      <xacro:insert_block name="origin" />
      <parent link="${namespace}/camera_${camera_suffix}_link" />
      <child link="${namespace}/camera_${camera_suffix}_infra1_link" />
    </joint>

    <joint name="${namespace}/camera_${camera_suffix}_infra2_joint" type="fixed">
      <xacro:insert_block name="origin" />
      <parent link="${namespace}/camera_${camera_suffix}_link" />
      <child link="${namespace}/camera_${camera_suffix}_infra2_link" />
    </joint>

    <joint name="${namespace}/camera_${camera_suffix}_glass_joint" type="fixed">
      <xacro:insert_block name="origin" />
      <parent link="${parent_link}" />
      <child link="${namespace}/camera_${camera_suffix}_glass_link" />
    </joint>
    <!--}-->

    <!-- sensor {-->
    <gazebo reference="${namespace}/camera_${camera_suffix}_link">
      <sensor type="depth" name="${namespace}_camera_${camera_suffix}">
        <update_rate>30.0</update_rate>
        <camera name="head">
          <horizontal_fov>${horizontal_fov}</horizontal_fov>
          <image>
            <width>${image_width}</width>
            <height>${image_height}</height>
          </image>
          <clip>
            <near>${min_distance}</near>
            <far>${max_distance}</far>
          </clip>
          <noise>
            <type>gaussian</type>
            <mean>${noise_mean}</mean>
            <stddev>${noise_stddev}</stddev>
          </noise>
        </camera>

        <plugin name="${namespace}_camera_${camera_suffix}_controller" filename="libgazebo_ros_depth_camera.so">
          <baseline>0.2</baseline>
          <alwaysOn>true</alwaysOn>
          <updateRate>30.0</updateRate>
          <cameraName>${camera_suffix}</cameraName>
          <imageTopicName>image_raw</imageTopicName>
          <cameraInfoTopicName>camera_info</cameraInfoTopicName>
          <depthImageTopicName>depth/image_raw</depthImageTopicName>
          <depthImageInfoTopicName>depth_info</depthImageInfoTopicName>
          <depthImageCameraInfoTopicName>depth_camera_info</depthImageCameraInfoTopicName>
          <pointCloudTopicName>depth_PCL</pointCloudTopicName>
          <frameName>/${frame_id}</frameName>
          <pointCloudCutoff>0.5</pointCloudCutoff>
          <distortionK1>0</distortionK1>
          <distortionK2>0</distortionK2>
          <distortionK3>0</distortionK3>
          <distortionT1>0</distortionT1>
          <distortionT2>0</distortionT2>
          <CxPrime>0</CxPrime>
          <Cx>0</Cx>
          <Cy>0</Cy>
          <focalLength>0</focalLength>
          <hackBaseline>0</hackBaseline>
        </plugin>
      </sensor>
    </gazebo>
    <!--}-->

    <gazebo reference="${namespace}/camera_${camera_suffix}_link">
      <material>Gazebo/White</material>
    </gazebo>

    <gazebo reference="${namespace}/camera_${camera_suffix}_glass_link">
      <material>Gazebo/DarkGrey</material>
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Macro to add the camera_plugin {-->
  <xacro:macro name="camera_macro"
    params="namespace parent_link camera_suffix camera_frame_name sensor_base_frame_name frame_rate parent_frame_name
    horizontal_fov image_width image_height min_distance max_distance x y z roll pitch yaw
    noise_mean noise_stddev *visual">

    <link name="${namespace}/camera_${camera_suffix}_link">
      <xacro:insert_block name="visual" />
    </link>

    <joint name="${namespace}/camera_${camera_suffix}_joint" type="fixed">
      <origin xyz="${x} ${y} ${z}" rpy="${roll} ${pitch} ${yaw}"/>
      <parent link="${parent_link}" />
      <child link="${namespace}/camera_${camera_suffix}_link" />
    </joint>

    <gazebo reference="${namespace}/camera_${camera_suffix}_link">
      <sensor type="camera" name="${namespace}_camera_${camera_suffix}">
        <update_rate>${frame_rate}</update_rate>
        <camera name="head">
          <horizontal_fov>${horizontal_fov}</horizontal_fov>
          <image>
            <width>${image_width}</width>
            <height>${image_height}</height>
          </image>
          <clip>
            <near>${min_distance}</near>
            <far>${max_distance}</far>
          </clip>
          <noise>
            <type>gaussian</type>
            <!-- Noise is sampled independently per pixel on each frame.
            That pixel's noise value is added to each of its color
            channels, which at that point lie in the range [0,1]. -->
            <mean>${noise_mean}</mean>
            <stddev>${noise_stddev}</stddev>
          </noise>
        </camera>
        <plugin name="${namespace}_camera_${camera_suffix}_controller" filename="libMRSGazeboCameraPlugin.so">
          <alwaysOn>true</alwaysOn>
          <updateRate>${frame_rate}</updateRate>
          <cameraName>${camera_suffix}</cameraName>
          <imageTopicName>image_raw</imageTopicName>
          <cameraInfoTopicName>camera_info</cameraInfoTopicName>
          <frameName>/${camera_frame_name}</frameName>
          <hackBaseline>0.0</hackBaseline>
          <distortionK1>0.0</distortionK1>
          <distortionK2>0.0</distortionK2>
          <distortionK3>0.0</distortionK3>
          <distortionT1>0.0</distortionT1>
          <distortionT2>0.0</distortionT2>
          <parentFrameName>${parent_frame_name}</parentFrameName>
          <sensorBaseFrameName>${sensor_base_frame_name}</sensorBaseFrameName>
          <x>${x}</x>
          <y>${y}</y>
          <z>${z}</z>
          <roll>${roll}</roll>
          <pitch>${pitch}</pitch>
          <yaw>${yaw}</yaw>
        </plugin>
      </sensor>
    </gazebo>
    <gazebo reference="${namespace}/camera_${camera_suffix}_link">
      <material>Gazebo/DarkGrey</material>
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!--}-->

  <!-- ================================================================== -->
  <!-- ||                      sensor definitions                      || -->
  <!-- ================================================================== -->

  <!-- ======================= rangefinder sensors ======================-->

  <!-- Macro to add a garmin {-->
  <!-- Orientation empty for down looking garmin, _up for upward looking sensor -->
  <xacro:macro name="garmin_macro"
    params="namespace parent_link orientation x y z yaw pitch roll">
    <xacro:rangefinder_macro
      namespace="${namespace}"
      name="garmin${orientation}"
      color="DarkGrey"
      parent_link="${parent_link}"
      frame_rate="100"
      rangefinder_suffix="garmin${orientation}"
      rangefinder_frame_name="${namespace}/garmin${orientation}"
      parent_frame_name="${namespace}/fcu"
      topic="garmin/range${orientation}"
      fov="0.03"
      min_distance="0.1"
      max_distance="40"
      resolution= "0.005"
      noise="0.01"
      x="${x}"
      y="${y}"
      z="${z}"
      yaw="${yaw}"
      pitch="${pitch}"
      roll="${roll}"
      >
      <visual>
        <origin xyz="0.015 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://mrs_robots_description/meshes/sensors/garmin_lidar_v3.stl"
            scale="0.001 0.001 0.001" />
        </geometry>
      </visual>
    </xacro:rangefinder_macro>
  </xacro:macro>
  <!--}-->

  <!-- Macro to add a Teraranger One {-->
  <xacro:macro name="teraranger_macro" params="namespace parent_link x y z yaw pitch roll">
    <xacro:rangefinder_macro
      namespace="${namespace}"
      name="teraranger"
      color="Yellow"
      parent_link="${parent_link}"
      frame_rate="100"
      rangefinder_suffix="teraranger"
      rangefinder_frame_name="${nacamespace}/teraranger"
      parent_frame_name="${namespace}/fcu"
      topic="teraranger/range"
      fov="0.03"
      min_distance="0.1"
      max_distance="14"
      resolution= "0.005"
      noise="0.04"
      x="${x}"
      y="${y}"
      z="${z}"
      yaw="${yaw}"
      pitch="${pitch}"
      roll="${roll}"
      >
      <visual>
        <origin xyz="0 0 0" rpy="0 -${rad90} 0" />
        <geometry>
          <box size=".027 .033 0.015" />
        </geometry>
      </visual>
    </xacro:rangefinder_macro>
  </xacro:macro>
  <!--}-->

  <!-- ========================== LIDAR sensors ========================= -->

  <!-- Macro to add a Scanse Sweeper{-->
  <xacro:macro name="scanse_sweep_macro"
    params="namespace x y z yaw pitch roll">

    <link name="${namespace}/sweeper_base_link">
      <visual>
        <origin xyz="0 0 -0.031" rpy="0 0 0" />
        <geometry>
          <cylinder radius="0.0255"
            length="0.0234" />
        </geometry>
      </visual>
    </link>

    <link name="${namespace}/sweeper_rotator_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <cylinder radius="0.0325"
            length="0.0385" />
        </geometry>
      </visual>
    </link>

    <joint name="${namespace}/sweeper_joint" type="fixed">
      <origin xyz="${x} ${y} ${z}" rpy="${roll} ${pitch} ${yaw}"/>
      <parent link="base_link" />
      <child link="${namespace}/sweeper_rotator_link" />
    </joint>

    <joint name="${namespace}/sweeper_base_joint" type="fixed">
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <parent link="${namespace}/sweeper_rotator_link" />
      <child link="${namespace}/sweeper_base_link" />
    </joint>

    <!-- sensor {-->
    <gazebo reference="${namespace}/sweeper_rotator_link">
      <sensor name='sweeper' type='ray'>
        <visualize>false</visualize>
        <update_rate>10</update_rate>
        <ray>
          <scan>
            <horizontal>
              <samples>500</samples>
              <resolution>1</resolution>
              <min_angle>0</min_angle>
              <max_angle>6.283185</max_angle>
            </horizontal>
          </scan>
          <range>
            <min>0.45</min>
            <max>10</max>
            <resolution>0.01</resolution>
          </range>
          <noise>
            <type>gaussian</type>
            <mean>0.0</mean>
            <stddev>0.01</stddev>
          </noise>
        </ray>
        <plugin name='mrs_gazebo_2dlidar' filename='libMRSGazebo2DLidarPlugin.so'>
            <topicName>scanse_sweep/range</topicName>
            <frameName>${namespace}/scanse_sweep</frameName>
            <parentFrameName>${namespace}/fcu</parentFrameName>
            <x>${x}</x>
            <y>${y}</y>
            <z>${z}</z>
            <roll>${roll}</roll>
            <pitch>${pitch}</pitch>
            <yaw>${yaw}</yaw>
          </plugin>
        </sensor>
      </gazebo>
      <!--}-->

    <gazebo reference="${namespace}/sweeper_base_link">
      <material>Gazebo/DarkGrey</material>
    </gazebo>

    <gazebo reference="${namespace}/sweeper_rotator_link">
      <material>Gazebo/DarkGrey</material>
    </gazebo>

  </xacro:macro>
  <!--}-->

  <!-- Macro to add a RPlidar A3{-->
  <xacro:macro name="rplidar_macro"
    params="namespace x y z yaw pitch roll">

    <link name="${namespace}/rplidar_base_link">
      <visual>
        <origin xyz="0 0 -0.029" rpy="0 0 ${rad180}" />
        <geometry>
          <mesh filename="package://mrs_robots_description/meshes/sensors/rplidar.stl"
            scale="0.001 0.001 0.001" />
        </geometry>
      </visual>
    </link>

    <link name="${namespace}/rplidar_visual_link">
      <visual>
        <origin xyz="0 0 -0.011" rpy="0 0 0" />
        <geometry>
          <cylinder radius="0.038"
            length="0.001" />
        </geometry>
      </visual>
    </link>

    <joint name="${namespace}/rplidar_joint" type="fixed">
      <origin xyz="${x} ${y} ${z}" rpy="${roll} ${pitch} ${yaw}"/>
      <parent link="base_link" />
      <child link="${namespace}/rplidar_base_link" />
    </joint>

    <joint name="${namespace}/rplidar_visual_joint" type="fixed">
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <parent link="${namespace}/rplidar_base_link" />
      <child link="${namespace}/rplidar_visual_link" />
    </joint>

    <!-- sensor {-->
    <gazebo reference="${namespace}/rplidar_base_link">
      <sensor name='rplidar' type='ray'>
        <visualize>false</visualize>
        <update_rate>20</update_rate>
        <ray>
          <scan>
            <horizontal>
              <samples>${14400/20}</samples>
              <resolution>1</resolution>
              <min_angle>-3.1241390751</min_angle>
              <max_angle>3.1241390751</max_angle>
            </horizontal>
          </scan>
          <range>
            <min>0.15</min>
            <max>14</max>
            <resolution>0.01</resolution>
          </range>
          <noise>
            <type>gaussian</type>
            <mean>0.0</mean>
            <stddev>0.01</stddev>
          </noise>
        </ray>
        <plugin name='mrs_gazebo_2dlidar' filename='libMRSGazebo2DLidarPlugin.so'>
            <topicName>rplidar/scan</topicName>
            <frameName>${namespace}/rplidar</frameName>
            <parentFrameName>${namespace}/fcu</parentFrameName>
            <x>${x}</x>
            <y>${y}</y>
            <z>${z}</z>
            <roll>${roll}</roll>
            <pitch>${pitch}</pitch>
            <yaw>${yaw}</yaw>
          </plugin>
        </sensor>
      </gazebo>
      <!--}-->

    <gazebo reference="${namespace}/rplidar_base_link">
      <material>Gazebo/FlatBlack</material>
    </gazebo>

    <gazebo reference="${namespace}/rplidar_visual_link">
      <material>Gazebo/Purple</material>
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Macro to add a Velodyne Lidar {-->
  <xacro:macro name="velodyne_macro" params="namespace sensor_name x y z yaw pitch roll rot_freq lasers max_range noise vfov_angle enable_gpu_ray">

    <xacro:property name="topic_lidar" value="/${namespace}/${sensor_name}/scan" />
    <xacro:property name="frame_sensor" value="${namespace}/${sensor_name}_sensor" />
    <xacro:property name="frame_lidar" value="${namespace}/${sensor_name}" />
    <xacro:property name="parent_link" value="base_link" />
    <xacro:property name="frame_fcu" value="${namespace}/fcu" />

    <!-- visual links and joints {-->
    <link name="${frame_sensor}_base_link">
      <visual name="velodyne_3D_base">
        <origin xyz="0 0 0.0094" rpy="0 0 0" />
        <geometry>
          <cylinder radius="0.062"
            length="0.0188" />
        </geometry>
      </visual>
      <visual name="velodyne_3D_top">
        <origin xyz="0 0 0.0643" rpy="0 0 0" />
        <geometry>
          <cylinder radius="0.062"
            length="0.0148" />
        </geometry>
      </visual>
    </link>

    <link name="${frame_sensor}_window_link">
      <visual>
        <origin xyz="0 0 0.03785" rpy="0 0 0" />
        <geometry>
          <cylinder radius="0.058"
            length="0.0381" />
        </geometry>
      </visual>
    </link>

    <link name="${frame_lidar}_link" />

    <joint name="${namespace}/base_joint" type="fixed">
      <origin xyz="${x} ${y} ${z}" rpy="${roll} ${pitch} ${yaw}" />
      <parent link="${parent_link}"/>
      <child link="${frame_sensor}_base_link"/>
    </joint>

    <joint name="{namespace}/lidar_link_joint" type="fixed">
      <parent link="${frame_sensor}_base_link" />
      <child link="${frame_lidar}_link" />
        <!-- The laser rays should be coming approximately from the half of sensor height -->
      <origin xyz="0.0 0.0 0.037725" rpy="0 0 0" />
    </joint>

    <joint name="{namespace}/window_joint" type="fixed">
      <parent link="${frame_sensor}_base_link" />
      <child link="${frame_sensor}_window_link" />
      <origin xyz="0.0 0.0 0.0" rpy="0 0 0" />
    </joint>

    <!--}-->

    <!-- Gazebo requires the velodyne_gazebo_plugins package -->
    <gazebo reference="${frame_lidar}_link">
      <xacro:if value="${enable_gpu_ray}">
        <xacro:property name="velodyne_plugin_filename" value="libMRSGazebo3DLidarGpuPlugin.so" />
        <xacro:property name="sensor_type" value="gpu_ray" />
      </xacro:if>
      <xacro:unless value="${enable_gpu_ray}">
        <xacro:property name="velodyne_plugin_filename" value="libMRSGazebo3DLidarPlugin.so" />
        <xacro:property name="sensor_type" value="ray" />
      </xacro:unless>
      <sensor type="${sensor_type}" name="${frame_sensor}">
        <pose>0 0 0 0 0 0</pose>
        <visualize>false</visualize>
        <update_rate>${rot_freq}</update_rate>
        <ray>
          <scan>
            <horizontal>
              <samples>${291200/(rot_freq*lasers)}</samples>
              <resolution>1</resolution>
              <min_angle>-${rad180}</min_angle>
              <max_angle>${rad180}</max_angle>
            </horizontal>
            <vertical>
              <samples>${lasers}</samples>
              <resolution>1</resolution>
              <min_angle>${-vfov_angle/2*rad180/180.0}</min_angle>
              <max_angle>${vfov_angle/2*rad180/180.0}</max_angle>
            </vertical>
          </scan>
          <range>
            <min>0.1</min>
            <max>${max_range}</max>
            <resolution>0.03</resolution>
          </range>
        </ray>
        <plugin name="gazebo_ros_laser_controller" filename="${velodyne_plugin_filename}">
          <parentFrameName>${frame_fcu}</parentFrameName>
          <sensorFrameName>${frame_sensor}</sensorFrameName>
          <sensor_x>${x}</sensor_x>
          <sensor_y>${y}</sensor_y>
          <sensor_z>${z}</sensor_z>
          <sensor_roll>${roll}</sensor_roll>
          <sensor_pitch>${pitch}</sensor_pitch>
          <sensor_yaw>${yaw}</sensor_yaw>

          <lidar_x>0</lidar_x>
          <lidar_y>0</lidar_y>
          <lidar_z>0.037725</lidar_z>
          <lidar_roll>0</lidar_roll>
          <lidar_pitch>0</lidar_pitch>
          <lidar_yaw>0</lidar_yaw>
          <topicName>${topic_lidar}</topicName>
          <lidarFrameName>${frame_lidar}</lidarFrameName>
          <min_range>0.1</min_range>
          <max_range>${max_range}</max_range>
          <gaussianNoise>${noise}</gaussianNoise>

          <imu>false</imu>

        </plugin>
      </sensor>
    </gazebo>

    <gazebo reference="${frame_sensor}_window_link">
      <material>Gazebo/Blue</material>
    </gazebo>

  </xacro:macro>
  <!--}-->

<!-- Macro to add an Ouster Lidar {-->
  <xacro:macro name="ouster_macro" params="namespace sensor_name x y z yaw pitch roll rot_freq lasers max_range noise vfov_angle enable_gpu_ray">

    <!-- gazebo links -->
    <xacro:property name="parent_link" value="base_link" />
    <xacro:property name="sensor_link" value="${namespace}/${sensor_name}_sensor_link" />
    <xacro:property name="sensor_window_link" value="${namespace}/${sensor_name}_sensor_window_link" />
    <xacro:property name="lidar_link" value="${namespace}/${sensor_name}_lidar_link" />
    <xacro:property name="imu_link" value="${namespace}/${sensor_name}_imu_link" />

    <!-- frame names -->
    <xacro:property name="frame_fcu" value="${namespace}/fcu" />
    <xacro:property name="frame_sensor" value="${namespace}/${sensor_name}_sensor" />
    <xacro:property name="frame_lidar" value="${namespace}/${sensor_name}_lidar" />
    <xacro:property name="frame_imu" value="${namespace}/${sensor_name}_imu" />

      <!-- topics -->
    <xacro:property name="topic_lidar" value="/${namespace}/${sensor_name}_cloud_node/points" />
    <xacro:property name="topic_imu" value="/${namespace}/${sensor_name}_cloud_node/imu" />

      <!-- tf from sensor to lidar -->
    <xacro:property name="lidar_x" value="0" />
    <xacro:property name="lidar_y" value="0" />
    <xacro:property name="lidar_z" value="0.0344" />
    <xacro:property name="lidar_roll" value="0" />
    <xacro:property name="lidar_pitch" value="0" />
    <xacro:property name="lidar_yaw" value="${rad180}" />

      <!-- tf from sensor to imu -->
    <xacro:property name="imu_x" value="0.006253" />
    <xacro:property name="imu_y" value="-0.011775" />
    <xacro:property name="imu_z" value="0.007645" />
    <xacro:property name="imu_roll" value="0" />
    <xacro:property name="imu_pitch" value="0" />
    <xacro:property name="imu_yaw" value="0" />

      <!-- links -->
    <link name="${sensor_link}">
      <visual>
        <origin xyz="0 0 0.0" rpy="0 0 ${rad90}" />
        <geometry>
          <mesh filename="package://mrs_robots_description/meshes/sensors/os1_64.dae" />
          <!-- <cylinder length="0.073" radius="0.04" /> -->
        </geometry>
      </visual>
    </link>
    <link name="${sensor_window_link}">
      <visual>
        <origin xyz="0 0 ${lidar_z}" rpy="0 0 0" />
        <geometry>
          <cylinder length="0.035" radius="0.038" />
        </geometry>
      </visual>
    </link>
    <link name="${imu_link}" />
    <link name="${lidar_link}" />

      <!-- joints -->
    <joint name="${namespace}/${sensor_name}_base_joint" type="fixed">
      <origin xyz="${x} ${y} ${z}" rpy="${roll} ${pitch} ${yaw}" />
      <parent link="${parent_link}"/>
      <child link="${sensor_link}"/>
    </joint>

    <joint name="${namespace}/${sensor_name}_base_window_joint" type="fixed">
      <origin xyz="0 0 0" rpy="0 0 0" />
      <parent link="${sensor_link}"/>
      <child link="${sensor_window_link}"/>
    </joint>

    <joint name="${namespace}/${sensor_name}_imu_link_joint" type="fixed">
      <parent link="${sensor_link}" />
      <child link="${imu_link}" />
      <origin xyz="${imu_x} ${imu_y} ${imu_z}" rpy="${imu_roll} ${imu_pitch} ${imu_yaw}" />
    </joint>

    <joint name="{namespace}/${sensor_name}_lidar_link_joint" type="fixed">
      <parent link="${sensor_link}" />
      <child link="${lidar_link}" />
      <origin xyz="${lidar_x} ${lidar_y} ${lidar_z}" rpy="${lidar_roll} ${lidar_pitch} ${lidar_yaw}" />
    </joint>

    <!-- Gazebo requires the ouster_gazebo_plugins package -->
    <gazebo reference="${lidar_link}">
      <xacro:if value="${enable_gpu_ray}">
        <xacro:property name="ouster_plugin_filename" value="libMRSGazebo3DLidarGpuPlugin.so" />
        <xacro:property name="sensor_type" value="gpu_ray" />
      </xacro:if>
      <xacro:unless value="${enable_gpu_ray}">
        <xacro:property name="ouster_plugin_filename" value="libMRSGazebo3DLidarPlugin.so" />
        <xacro:property name="sensor_type" value="ray" />
      </xacro:unless>
      <sensor type="${sensor_type}" name="ouster_${sensor_name}">
        <pose>0 0 0 0 0 0</pose>
        <visualize>false</visualize>
        <update_rate>${rot_freq}</update_rate>
        <ray>
          <scan>
            <horizontal>
              <samples>${20480/rot_freq}</samples>
              <resolution>1</resolution>
              <min_angle>-${rad180}</min_angle>
              <max_angle>${rad180}</max_angle>
            </horizontal>
            <vertical>
              <samples>${lasers}</samples>
              <resolution>1</resolution>
              <min_angle>${-vfov_angle/2*rad180/180.0}</min_angle>
              <max_angle>${vfov_angle/2*rad180/180.0}</max_angle>
            </vertical>
          </scan>
          <range>
            <min>0.1</min>
            <max>${max_range}</max>
            <resolution>0.03</resolution>
          </range>
        </ray>
        <plugin name="gazebo_ros_laser_controller" filename="${ouster_plugin_filename}">
          <parentFrameName>${frame_fcu}</parentFrameName>
          <sensorFrameName>${frame_sensor}</sensorFrameName>
          <sensor_x>${x}</sensor_x>
          <sensor_y>${y}</sensor_y>
          <sensor_z>${z}</sensor_z>
          <sensor_roll>${roll}</sensor_roll>
          <sensor_pitch>${pitch}</sensor_pitch>
          <sensor_yaw>${yaw}</sensor_yaw>

            <!-- Lidar parameters -->
          <lidarFrameName>${frame_lidar}</lidarFrameName>
          <lidar_x>${lidar_x}</lidar_x>
          <lidar_y>${lidar_y}</lidar_y>
          <lidar_z>${lidar_z}</lidar_z>
          <lidar_roll>${lidar_roll}</lidar_roll>
          <lidar_pitch>${lidar_pitch}</lidar_pitch>
          <lidar_yaw>${lidar_yaw}</lidar_yaw>
          <topicName>${topic_lidar}</topicName>
          <min_range>0.1</min_range>
          <max_range>${max_range}</max_range>
          <gaussianNoise>${noise}</gaussianNoise>

            <!-- IMU parameters -->
          <imu>true</imu>
          <imuFrameName>${frame_imu}</imuFrameName>
          <imu_x>${imu_x}</imu_x>
          <imu_y>${imu_y}</imu_y>
          <imu_z>${imu_z}</imu_z>
          <imu_roll>${imu_roll}</imu_roll>
          <imu_pitch>${imu_pitch}</imu_pitch>
          <imu_yaw>${imu_yaw}</imu_yaw>
        </plugin>
      </sensor>
    </gazebo>

    <!-- IMU -->
    <gazebo reference="${imu_link}">
      <gravity>true</gravity>
      <sensor name="ouster_imu_sensor" type="imu">
        <always_on>true</always_on>
        <update_rate>100</update_rate>
        <visualize>false</visualize>
        <topic>${imu_link}</topic>
        <plugin filename="libgazebo_ros_imu_sensor.so" name="imu_plugin">
          <robotNamespace></robotNamespace>
          <topicName>${topic_imu}</topicName>
          <bodyName>${imu_link}</bodyName>
          <updateRateHZ>100</updateRateHZ>
          <gaussianNoise>0.005</gaussianNoise>
          <xyzOffset>0 0 0</xyzOffset>
          <rpyOffset>0 0 0</rpyOffset>
          <frameName>${frame_imu}</frameName>
        </plugin>
        <pose>0 0 0 0 0 0</pose>
      </sensor>
      <!-- <plugin name="imu_controller" filename="libhector_gazebo_ros_imu.so"> -->
      <!--   <updateRate>100.0</updateRate> -->
      <!--   <bodyName>${frame_imu}</bodyName> -->
      <!--   <topicName>${topic_imu}</topicName> -->
      <!--   <accelDrift>0.005 0.005 0.005</accelDrift> -->
      <!--   <accelGaussianNoise>0.005 0.005 0.005</accelGaussianNoise> -->
      <!--   <rateDrift>0.005 0.005 0.005 </rateDrift> -->
      <!--   <rateGaussianNoise>0.005 0.005 0.005 </rateGaussianNoise> -->
      <!--   <headingDrift>0.005</headingDrift> -->
      <!--   <headingGaussianNoise>0.005</headingGaussianNoise> -->
      <!-- </plugin> -->
    </gazebo>

    <gazebo reference="${sensor_link}">
      <material>Gazebo/White</material>
    </gazebo>

    <gazebo reference="${sensor_window_link}">
      <material>Gazebo/Black</material>
    </gazebo>

  </xacro:macro>
  <!--}-->

  <!-- ========================= camera sensors ========================= -->

  <!-- Macro to add an Intel Realsense D435 {-->
  <xacro:macro name="realsense_macro"
    params="namespace parent_link parent_frame_name camera_suffix x y z roll pitch yaw enable_realistic_realsense">

    <!-- visual links and joints {-->
    <link name="${namespace}/camera_${camera_suffix}">
      <visual>
        <origin xyz="0.0 0.0 0" rpy="-${rad90} 0 -${rad90}" />
        <geometry>
          <mesh filename="package://mrs_robots_description/meshes/sensors/realsense_body.stl"
            scale="0.001 0.001 0.001" />
        </geometry>
      </visual>
    </link>

    <link name="${namespace}/camera_${camera_suffix}_glass_link">
      <visual>
        <origin xyz="0.0 0.0 0" rpy="-${rad90} 0 -${rad90}" />
        <geometry>
          <mesh filename="package://mrs_robots_description/meshes/sensors/realsense_glass.stl"
            scale="0.001 0.001 0.001" />
        </geometry>
      </visual>
    </link>

    <joint name="${namespace}/camera_${camera_suffix}_joint" type="fixed">
      <origin xyz="${x} ${y} ${z}" rpy="${roll} ${pitch} ${yaw}"/>
      <parent link="${parent_link}" />
      <child link="${namespace}/camera_${camera_suffix}" />
    </joint>

    <joint name="${namespace}/camera_${camera_suffix}_glass_joint" type="fixed">
      <origin xyz="0 0 0 " rpy="0 0 0"/>
      <parent link="${namespace}/camera_${camera_suffix}" />
      <child link="${namespace}/camera_${camera_suffix}_glass_link" />
    </joint>
    <!--}-->

    <gazebo>
      <plugin name="${camera_suffix}_plugin" filename="libMRSGazeboRealsensePlugin.so">
        <useRealistic>${enable_realistic_realsense}</useRealistic>
        <noisePerMeter>0.2</noisePerMeter>
        <minNoiseDistance>4.0</minNoiseDistance>
        <perlinEmptyThreshold>0.8</perlinEmptyThreshold>
        <perlinEmptySpeed>0.2</perlinEmptySpeed>
        <imageScaling>4</imageScaling>
        <blurSize>15</blurSize>
        <erosionSize>5</erosionSize>
        <parentFrameName>${parent_frame_name}</parentFrameName>
        <x>${x}</x>
        <y>${y}</y>
        <z>${z}</z>
        <roll>${roll}</roll>
        <pitch>${pitch}</pitch>
        <yaw>${yaw}</yaw>
      </plugin>
    </gazebo>

    <!-- sensors {-->
    <gazebo reference="${namespace}/camera_${camera_suffix}">

      <!-- rgb camera {-->
      <sensor name="${namespace}/color" type="camera">
        <!-- <pose frame="">0 -0.046 0.004 0 0 0</pose> -->
        <pose frame="">0 0 -0.0115 0 0 0</pose>
        <camera name="${namespace}/camera_${camera_suffix}">
          <!-- <horizontal_fov>1.211259</horizontal_fov> -->
          <horizontal_fov>1.211259</horizontal_fov>
          <image>
            <width>1280</width>
            <height>720</height>
            <format>RGB_INT8</format>
          </image>
          <clip>
            <near>0.1</near>
            <far>100</far>
          </clip>
          <noise>
            <type>gaussian</type>
            <mean>0.0</mean>
            <stddev>0.007</stddev>
          </noise>
        </camera>
        <always_on>1</always_on>
        <update_rate>60</update_rate>
        <visualize>0</visualize>
      </sensor>
      <!--}-->

      <!-- infra stereo {-->
      <sensor name="${namespace}/infra_stereo" type="multicamera">
        <always_on>1</always_on>
        <update_rate>30</update_rate>
        <visualize>0</visualize>
        <camera name="${namespace}/infra1">
          <!-- <horizontal_fov>1.7523106</horizontal_fov> -->
          <horizontal_fov>1.211259</horizontal_fov>
          <image>
            <width>640</width>
            <height>360</height>
            <format>L_INT8</format>
          </image>
          <clip>
            <near>0.1</near>
            <far>50</far>
          </clip>
          <noise>
            <type>gaussian</type>
            <mean>0.0</mean>
            <stddev>0.005</stddev>
          </noise>
        </camera>
        <camera name="${namespace}/infra2">
          <pose>0 0.05 0 0 0 0</pose>
          <!-- <horizontal_fov>1.7523106</horizontal_fov> -->
          <horizontal_fov>1.211259</horizontal_fov>
          <image>
            <width>640</width>
            <height>360</height>
            <format>L_INT8</format>
          </image>
          <clip>
            <near>0.1</near>
            <far>50</far>
          </clip>
          <noise>
            <type>gaussian</type>
            <mean>0.0</mean>
            <stddev>0.005</stddev>
          </noise>
        </camera>
      </sensor>
      <!--}-->

      <!-- (unused) infra2 {-->
        <!-- <sensor name="infra2" type="camera"> -->
        <!-- <parent link="${namespace}/camera_${camera_suffix}"/> -->
        <!-- <pose>0 -1.0325 0 0 0 0</pose> -->
        <!--   <pose frame="${namespace}/camera_${camera_suffix}_infra2">0 -1.0325 0 0 0 0</pose> -->
        <!--   <camera name="${namespace}/camera_${camera_suffix}_infra2"> -->
          <!-- <horizontal_fov>1.7523106</horizontal_fov> -->
          <!--     <horizontal_fov>1.211259</horizontal_fov> -->
          <!--     <image> -->
            <!--       <width>1280</width> -->
            <!--       <height>720</height> -->
            <!--       <format>L_INT8</format> -->
            <!--     </image> -->
          <!--     <clip> -->
            <!--       <near>0.1</near> -->
            <!--       <far>10</far> -->
            <!--     </clip> -->
          <!--     <noise> -->
            <!--       <type>gaussian</type> -->
            <!--       <mean>0.0</mean> -->
            <!--       <stddev>0.05</stddev> -->
            <!--     </noise> -->
          <!--   </camera> -->
        <!--   <always_on>1</always_on> -->
        <!--   <update_rate>60</update_rate> -->
        <!--   <visualize>0</visualize> -->
          <!-- </sensor> -->
          <!--}-->

      <!-- aligned depth to color {-->
      <sensor name="${namespace}/aligned_depth_to_color" type="depth">
        <pose>0 -0.0115 0.0 0 0 0</pose>
        <camera name="${namespace}/camera_${camera_suffix}">
          <horizontal_fov>1.211259</horizontal_fov>
          <image>
            <xacro:if value="${enable_realistic_realsense}">
              <width>320</width>
              <height>180</height>
            </xacro:if>
            <xacro:unless value="${enable_realistic_realsense}">
              <width>1280</width>
              <height>720</height>
            </xacro:unless>
          </image>
          <clip>
            <near>0.3</near>
            <far>12</far>
          </clip>
          <noise>
            <type>gaussian</type>
            <mean>0.0</mean>
            <stddev>5000.0</stddev>
          </noise>
        </camera>
        <always_on>1</always_on>
        <update_rate>60</update_rate>
        <visualize>0</visualize>
      </sensor>
      <!--}-->

    </gazebo>
    <!--}-->

    <gazebo reference="${namespace}/camera_${camera_suffix}">
      <material>Gazebo/White</material>
    </gazebo>
    <gazebo reference="${namespace}/camera_${camera_suffix}_glass_link">
      <material>Gazebo/BlackTransparent</material>
    </gazebo>

  </xacro:macro>
  <!--}-->

  <!-- Macro to add a Bluefox camera {-->
  <xacro:macro name="bluefox_camera_macro"
    params="namespace parent_link camera_suffix frame_rate hfov noise x y z roll pitch yaw camera_frame_name sensor_base_frame_name parent_frame_name">
    <xacro:camera_macro
      namespace="${namespace}"
      parent_link="${parent_link}"
      camera_suffix="${camera_suffix}"
      camera_frame_name="${camera_frame_name}"
      sensor_base_frame_name="${sensor_base_frame_name}"
      frame_rate="${frame_rate}"
      horizontal_fov="${hfov}"
      image_width="752"
      image_height="480"
      min_distance="0.02"
      max_distance="80"
      noise_mean="0.0"
      noise_stddev="${noise}"
      parent_frame_name="${parent_frame_name}"
      x="${x}"
      y="${y}"
      z="${z}"
      yaw="${yaw}"
      pitch="${pitch}"
      roll="${roll}"
      >
      <visual>
        <origin xyz="0 0 0" rpy="${rad90} 0 0" />
        <geometry>
          <mesh filename="package://mrs_robots_description/meshes/sensors/bluefox.dae"
            scale="1 1 1" />
        </geometry>
      </visual>
    </xacro:camera_macro>
  </xacro:macro>
  <!--}-->

  <!-- Macro to add a Mobius camera {-->
  <xacro:macro name="mobius_camera_macro"
    params="namespace parent_link camera_suffix frame_rate  x y z roll pitch yaw camera_frame_name sensor_base_frame_name parent_frame_name">
    <xacro:camera_macro
      namespace="${namespace}"
      parent_link="${parent_link}"
      camera_suffix="${camera_suffix}"
      frame_rate="${frame_rate}"
      camera_frame_name="${camera_frame_name}"
      sensor_base_frame_name="${sensor_base_frame_name}"
      horizontal_fov="2.28638"
      image_width="1280"
      image_height="720"
      min_distance="0.02"
      max_distance="40"
      noise_mean="0.0"
      noise_stddev="0.007"
      parent_frame_name="${parent_frame_name}"
      x="${x}"
      y="${y}"
      z="${z}"
      yaw="${yaw}"
      pitch="${pitch}"
      roll="${roll}"
      >
      <visual>
        <origin xyz="-0.004 0.0045 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://mrs_robots_description/meshes/sensors/mobius.dae"
            scale="1 1 1" />
        </geometry>
      </visual>
    </xacro:camera_macro>
  </xacro:macro>
  <!--}-->

  <!-- Macro to add a thermal camera {-->
  <xacro:macro name="thermal_camera_macro" params="namespace parent_frame_name camera_frame_name sensor_base_frame_name camera_topic_name camera_suffix parent_link frame_rate hfov x y z roll pitch yaw image_width image_height color">
    <link name="${namespace}/${camera_frame_name}/thermal_camera_link">
      <visual>
        <origin xyz="0 0 0" rpy="${rad90} 0 0" />
        <geometry>
          <mesh filename="package://mrs_robots_description/meshes/sensors/bluefox.dae" scale="1 1 1" />
        </geometry>
      </visual>
    </link>

    <joint name="${namespace}/${camera_frame_name}/thermal_camera_joint" type="fixed">
      <origin xyz="${x} ${y} ${z}" rpy="${roll} ${pitch} ${yaw}"/>
      <parent link="${parent_link}" />
      <child link="${namespace}/${camera_frame_name}/thermal_camera_link" />
    </joint>

    <gazebo reference="${namespace}/${camera_frame_name}/thermal_camera_link">
      <sensor type="camera" name="mrs_thermal_camera_sensor">
        <update_rate>${frame_rate}</update_rate>
        <camera>
          <horizontal_fov>${hfov}</horizontal_fov>
          <image>
            <format>R8G8B8</format>
            <width>${3 * image_width}</width>
            <height>${3 * image_height}</height>
          </image>
          <clip>
            <near>0.1</near>
            <far>300</far>
          </clip>
        </camera>
        <plugin name="thermal_camera_controller" filename="libmrs_gazebo_ros_thermal_camera.so">
          <alwaysOn>true</alwaysOn>
          <cameraName>${camera_suffix}</cameraName>
          <updateRate>${frame_rate}</updateRate>
          <imageTopicName>${camera_topic_name}/rgb_image</imageTopicName>
          <cameraInfoTopicName>${camera_topic_name}/camera_info</cameraInfoTopicName>
          <rawTemperatureTopicName>${camera_topic_name}/raw_temp_array</rawTemperatureTopicName>
          <surroundingTemperature>20</surroundingTemperature>
          <maximalTemperature>150</maximalTemperature>
          <minimalTemperatureGreenColor>0.2</minimalTemperatureGreenColor>
          <noiseStdDev>4.0</noiseStdDev>
          <noiseStdDevMaxTemp>20.0</noiseStdDevMaxTemp>
          <frameName>${camera_frame_name}</frameName>
          <parentFrameName>${parent_frame_name}</parentFrameName>
          <sensorBaseFrameName>${sensor_base_frame_name}</sensorBaseFrameName>
          <x>${x}</x>
          <y>${y}</y>
          <z>${z}</z>
          <roll>${roll}</roll>
          <pitch>${pitch}</pitch>
          <yaw>${yaw}</yaw>
        </plugin>
      </sensor>
    </gazebo>
    <gazebo reference="${namespace}/thermal_camera_link">
      <material>Gazebo/${color}</material>
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Macro to add a UV Camera {-->
  <xacro:macro name="uvcam_macro"
    params="calibration_file frame_rate number namespace parent_link camera_publish_topic *origin">
    <link name="${namespace}_uvcam_${number}_link">
      <gravity>0</gravity>
      <visual>
        <origin xyz="0 0 0" rpy="${rad90} 0 0" />
        <geometry>
          <mesh filename="package://mrs_robots_description/meshes/sensors/bluefox.dae"
            scale="1 1 1" />
        </geometry>
      </visual>
    </link>
    <joint name="${namespace}_$uvcam_${number}_lens_joint" type="fixed">
      <parent link="${parent_link}" />
      <xacro:insert_block name="origin" />
      <child link="${namespace}_uvcam_${number}_link" />
    </joint>
    <gazebo reference="${namespace}_uvcam_${number}_link">
      <sensor type="rfid" name="${namespace}_uvcam_${number}_dummycam">
        <update_rate>1</update_rate>
        <plugin name='${namespace}_uvcam_${number}' filename="libuvdar_cam.so">
          <alwaysOn>false</alwaysOn>
          <updateRate>${frame_rate}</updateRate>
          <occlusion>false</occlusion>
          <framerate>${frame_rate}</framerate>
          <calibration_file>${calibration_file}</calibration_file>
          <number>${number}</number>
          <camera_publish_topic>${camera_publish_topic}</camera_publish_topic>
        </plugin>
      </sensor>
    </gazebo>

    <gazebo reference="${namespace}_uvcam_${number}_link">
      <material>Gazebo/Black</material>
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Macro to add a camera mounted on virtual servo {-->
  <xacro:macro name="servo_camera_macro" params="namespace name parent offset_x offset_y offset_z offset_yaw offset_roll offset_pitch update_rate max_pitch_rate camera_type">

      <joint name="${name}_joint" type="revolute">
          <parent link="${parent}"/>
          <child link="${name}_link"/>
          <axis xyz="0 1 0"/>
          <dynamics damping="0.05" friction="0.05"/>
          <limit upper="1.57" lower="-1.57" effort="1" velocity="10" />
          <origin xyz="${offset_x} ${offset_y} ${offset_z}" rpy="0.0 0.0 0.0"/>
      </joint>

      <link name="${name}_link">
          <inertial>
              <mass value="1e-3" />
              <inertia ixx="1e-5" ixy="0.0" ixz="0.0" iyy="1e-5" iyz="0.0" izz="1e-5"/>
          </inertial>
        <visual>
          <geometry>
            <box size="0.01 0.01 0.01" />
          </geometry>
        </visual>
      </link>
      <gazebo>
        <plugin name="servo_camera_plugin" filename="libMRSGazeboServoCameraPlugin.so">
          <offset_x>${offset_x}</offset_x>
          <offset_y>${offset_y}</offset_y>
          <offset_z>${offset_z}</offset_z>
          <offset_pitch>${offset_pitch}</offset_pitch>
          <offset_yaw>${offset_yaw}</offset_yaw>
          <offset_roll>${offset_roll}</offset_roll>
          <spawning_frame>${parent}</spawning_frame>
          <update_rate>${update_rate}</update_rate>
          <max_pitch_rate>${max_pitch_rate}</max_pitch_rate>
          <joint_name>${name}_joint</joint_name>
          <camera_type>${camera_type}</camera_type>
        </plugin>
      </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- ========================== other sensors ========================= -->

  <!-- Macro to add a Teraranger Tower Evo {-->

  <!-- Teraranger Tower definition {-->
  <!-- Macro to add a Teraranger Tower base hub {-->
  <xacro:macro name="teraranger_base_hub" params="namespace parent_link x y z roll pitch yaw *origin">
    <link name="${namespace}_teraranger_base_hub">
      <visual>
        <origin xyz="0 0 -0.014" rpy="0 0 0 "/>
        <geometry>
          <cylinder length="0.001" radius="0.06"/>
        </geometry>
        <material name="Black"/>
      </visual>
    </link>

    <link name="${namespace}_hub_gyro_link"/>
    <joint name="${namespace}_hub_gyro_joint" type="fixed">
      <origin xyz="0 0 -0.014" rpy="0 0 0" />
      <parent link="${namespace}_teraranger_base_hub" />
      <child link="${namespace}_hub_gyro_link" />
    </joint>

    <link name="${namespace}_inertial_link">
      <inertial>
        <mass value="0.3"/>
        <origin xyz="0 0 -0.014" rpy="0 0 0" />
        <xacro:cylinder_inertia m="0.1" r="0.6" h="0.03" />
      </inertial>
    </link>
    <joint name="${namespace}_inertial_joint" type="fixed">
      <origin xyz="${x} ${y} ${z}" rpy="${roll} ${pitch} ${yaw}"/>
      <parent link="${namespace}_teraranger_base_hub" />
      <child link="${namespace}_inertial_link" />
    </joint>

    <gazebo reference="${namespace}_teraranger_base_hub">
      <material>Gazebo/Black</material>
      <!-- <turnGravityOff>true</turnGravityOff> -->
    </gazebo>

    <joint name="${namespace}_teraranger_base_hub_joint" type="fixed">
      <xacro:insert_block name="origin"/>
      <origin xyz="${x} ${y} ${z}" rpy="${roll} ${pitch} ${yaw}"/>
      <parent link="${parent_link}"/>
      <child link="${namespace}_teraranger_base_hub"/>
    </joint>
  </xacro:macro>
  <!--}-->

  <!-- Macro to add a single Teraranger Evo {-->
  <xacro:macro name="teraranger_evo" params="namespace id x y z roll pitch yaw visualize frame_name parent_frame_name gaussian_noise">
    <link name="${namespace}_teraranger_base_range_${id}">
      <visual>
        <origin xyz="0.0 0 0.0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://mrs_robots_description/meshes/sensors/teraranger_evo.stl"/>
        </geometry>
        <material name="Yellow"/>
      </visual>
    </link>

    <joint name="${namespace}_teraranger_base_range_joint_${id}" type="fixed">
      <origin xyz="${x} ${y} ${z}" rpy="${roll} ${pitch} ${yaw}"/>
      <parent link="${namespace}_teraranger_base_hub"/>
      <child link="${namespace}_teraranger_base_range_${id}"/>
    </joint>

    <gazebo reference="${namespace}_teraranger_base_range_${id}">
      <material>Gazebo/Yellow</material>
      <sensor type="ray" name="${namespace}_teraranger_sensor_${id}">
        <visualize>${visualize}</visualize>
        <update_rate>120</update_rate>
        <ray>
          <scan>
            <horizontal>
              <samples>10</samples>
              <resolution>1</resolution>
              <min_angle>-0.01750</min_angle>
              <max_angle>0.01750</max_angle>
            </horizontal>
            <vertical>
              <samples>10</samples>
              <resolution>1</resolution>
              <min_angle>-0.01750</min_angle>
              <max_angle>0.01750</max_angle>
            </vertical>
          </scan>
          <range>
            <min>0.5</min>
            <max>60.0</max>
            <resolution>0.05</resolution>
          </range>
        </ray>
        <plugin name='mrs_gazebo_rangefinder' filename='libMRSGazeboRangefinderPlugin.so'>
          <topicName>teraranger_tower/range_${id}</topicName>
          <frameName>${frame_name}_range_${id}</frameName>
          <parentFrameName>${parent_frame_name}</parentFrameName>
          <gaussianNoise>${gaussian_noise}</gaussianNoise>
          <updateRate>20</updateRate>
          <radiation>ultrasound</radiation>
          <fov>0.035</fov>
          <x>${x}</x>
          <y>${y}</y>
          <z>${z}</z>
          <roll>${roll}</roll>
          <pitch>${pitch}</pitch>
          <yaw>${yaw}</yaw>
        </plugin>
      </sensor>
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Terraranger Evo Tower configuration {-->
  <xacro:macro name="teraranger_evo_tower" params="namespace parent_link visualize x y z roll pitch yaw *origin frame_name parent_frame_name">
    <!-- EVO TOWER CONFIG-->
    <xacro:teraranger_base_hub
      namespace="${namespace}"
      parent_link="${parent_link}"
      x="0" y="0" z="-0.014" roll="0" pitch="0" yaw="0"
      >
      <xacro:insert_block name="origin"/>
    </xacro:teraranger_base_hub>

    <xacro:teraranger_evo namespace="${namespace}" id="0" x="0.046" y="0.000" z="0.001" roll="0" pitch="0" yaw="0.000" visualize="${visualize}" frame_name="${frame_name}" parent_frame_name="${frame_name}" gaussian_noise="0"/>
    <xacro:teraranger_evo namespace="${namespace}" id="1" x="0.032" y="0.032" z="0.001" roll="0" pitch="0" yaw="0.785" visualize="${visualize}" frame_name="${frame_name}" parent_frame_name="${frame_name}" gaussian_noise="0"/>
    <xacro:teraranger_evo namespace="${namespace}" id="2" x="0.000" y="0.046" z="0.001" roll="0" pitch="0" yaw="1.571" visualize="${visualize}" frame_name="${frame_name}" parent_frame_name="${frame_name}" gaussian_noise="0"/>
    <xacro:teraranger_evo namespace="${namespace}" id="3" x="-0.032" y="0.032" z="0.001" roll="0" pitch="0" yaw="2.356" visualize="${visualize}" frame_name="${frame_name}" parent_frame_name="${frame_name}" gaussian_noise="0"/>
    <xacro:teraranger_evo namespace="${namespace}" id="4" x="-0.046" y="0.000" z="0.001" roll="0" pitch="0" yaw="3.142" visualize="${visualize}" frame_name="${frame_name}" parent_frame_name="${frame_name}" gaussian_noise="0"/>
    <xacro:teraranger_evo namespace="${namespace}" id="5" x="-0.032" y="-0.032" z="0.001" roll="0" pitch="0" yaw="-2.356" visualize="${visualize}" frame_name="${frame_name}" parent_frame_name="${frame_name}" gaussian_noise="0"/>
    <xacro:teraranger_evo namespace="${namespace}" id="6" x="0.000" y="-0.046" z="0.001" roll="0" pitch="0" yaw="-1.571" visualize="${visualize}" frame_name="${frame_name}" parent_frame_name="${frame_name}" gaussian_noise="0"/>
    <xacro:teraranger_evo namespace="${namespace}" id="7" x="0.032" y="-0.032" z="0.001" roll="0" pitch="0" yaw="-0.785" visualize="${visualize}" frame_name="${frame_name}" parent_frame_name="${frame_name}" gaussian_noise="0"/>
  </xacro:macro>
  <!--}-->
  <!--}-->

  <xacro:macro name="teraranger_tower_evo_macro"
    params="namespace parent_link frame_name parent_frame_name *origin">
    <xacro:teraranger_evo_tower
      namespace="${namespace}"
      parent_link="${parent_link}"
      visualize="false"
      x="0.0" y="0.0" z="0.0" roll="0" pitch="0" yaw="0"
      frame_name="${frame_name}"
      parent_frame_name="${parent_frame_name}"
      >
      <xacro:insert_block name="origin" />
    </xacro:teraranger_evo_tower>
  </xacro:macro>
  <!--}-->

  <!-- Macro to add a gps satelite blocking sensor {-->
  <xacro:macro name="gps_satelites_blocking_macro"
    params="namespace parent_link">
    <link name="${namespace}/gps_sat_link">
      <visual name="gps_sat_base">
        <geometry>
          <cylinder radius="0.0255"
            length="0.0234" />
        </geometry>
      </visual>
    </link>
    <joint name="${namespace}/gps_sat_link_joint" type="fixed">
      <parent link="${parent_link}" />
      <child link="${namespace}/gps_sat_link" />
      <origin xyz="0 0 0" rpy="0 -${rad90} 0" />
    </joint>
    <gazebo reference="${namespace}/gps_sat_link">
      <sensor name='sweeper' type='ray'>
        <visualize>false</visualize>
        <update_rate>2</update_rate>
        <ray>
          <scan>
            <horizontal>
              <samples>4</samples>
              <resolution>1</resolution>
              <min_angle>-1.1</min_angle>
              <max_angle>1.1</max_angle>
            </horizontal>
            <vertical>
              <samples>4</samples>
              <resolution>1</resolution>
              <min_angle>-0.9</min_angle>
              <max_angle>0.9</max_angle>
            </vertical>
          </scan>
          <range>
            <min>0.5</min>
            <max>50</max>
            <resolution>0.5</resolution>
          </range>
        </ray>
        <plugin name='gazebo_ros_range' filename='libgazebo_ros_laser.so'>
          <topicName>gps_sat_blocking</topicName>
          <frameName>gps_blocking</frameName>
        </plugin>
      </sensor>
      <material>Gazebo/Black</material>
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Macro to add a magnetic gripper {-->
  <xacro:macro name="magnet_gripper_macro"
    params="namespace name color parent *origin">
    <joint name="${name}_joint" type="fixed">
      <xacro:insert_block name="origin" />
      <parent link="${parent}" />
      <child link="${namespace}/${name}_link" />
    </joint>
    <link name="${namespace}/${name}_link">
      <visual>
        <origin xyz="-0.09 0 0.03" rpy="0 0 0" />
        <geometry>
          <box size=".005 .05 0.06" />
        </geometry>
      </visual>
      <visual>
        <origin xyz="0.09 0 0.03" rpy="0 0 0" />
        <geometry>
          <box size=".005 .05 0.06" />
        </geometry>
      </visual>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <box size=".18 .05 0.005" />
        </geometry>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <box size=".18 .05 0.005" />
        </geometry>
      </collision>
    </link>
    <gazebo reference="${name}_link">
      <material>Gazebo/${color}</material>
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Macro to add a Timepix detector {-->
  <xacro:macro name="timepix_macro" params="namespace name parent color *origin">
    <joint name="${name}_joint" type="fixed">
      <xacro:insert_block name="origin" />
      <parent link="${parent}" />
      <child link="${name}_link" />
    </joint>
    <link name="${name}_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <box size="0.02 0.1 0.1" />
        </geometry>
      </visual>
    </link>
    <gazebo reference="${name}_link">
      <material>Gazebo/${color}</material>
    </gazebo>
    <gazebo>
      <plugin name="gazebo_timepix" filename="libgazebo_timepix.so" />
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Macro to add a water gun {-->
  <xacro:macro name="water_gun_macro" params="namespace name parent muzzle_velocity particle_capacity spread color spawning_reservoir offset_x offset_y offset_z size_x size_y size_z *origin">
    <joint name="${name}_joint" type="fixed">
      <xacro:insert_block name="origin" />
      <parent link="${parent}" />
      <child link="${name}_link" />
    </joint>
    <link name="${name}_link">
      <visual>
        <origin xyz="${offset_x - size_x} ${offset_y} ${offset_z}" rpy="0 0 0" />
        <geometry>
          <box size="${size_x} ${size_y} ${size_z}" />
        </geometry>
      </visual>
    </link>
    <gazebo reference="${name}_link">
      <material>Gazebo/${color}</material>
    </gazebo>
    <gazebo>
      <plugin name="water_gun_plugin" filename="libwater_gun_plugin.so">
        <muzzle_velocity>${muzzle_velocity}</muzzle_velocity>
        <offset_x>${offset_x}</offset_x>
        <offset_y>${offset_y}</offset_y>
        <offset_z>${offset_z}</offset_z>
        <spread>${spread}</spread>
        <particle_capacity>${particle_capacity}</particle_capacity>
        <spawning_reservoir>${spawning_reservoir}</spawning_reservoir>
      </plugin>
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Macro to add a light {-->
  <xacro:macro name="light_macro" params="namespace name parent offset_x offset_y offset_z offset_yaw offset_roll offset_pitch update_rate max_pitch_rate initial_on ">
      <joint name="${name}_joint" type="revolute">
          <parent link="${parent}"/>
          <child link="${name}_link"/>
          <axis xyz="0 1 0"/>
          <dynamics damping="0.05" friction="0.05"/>
          <limit upper="1.57" lower="-1.57" effort="1" velocity="10" />
          <origin xyz="${offset_x} ${offset_y} ${offset_z}" rpy="0.0 0.0 0.0"/>
      </joint>
      <link name="${name}_link">
          <inertial>
              <mass value="1e-3" />
              <inertia ixx="1e-5" ixy="0.0" ixz="0.0" iyy="1e-5" iyz="0.0" izz="1e-5"/>
          </inertial>
        <visual>
          <geometry>
            <box size="0.01 0.01 0.01" />
          </geometry>
        </visual>
      </link>
      <gazebo>
        <plugin name="light_gazebo_plugin" filename="libMRSGazeboLightPlugin.so">
          <offset_x>${offset_x}</offset_x>
          <offset_y>${offset_y}</offset_y>
          <offset_z>${offset_z}</offset_z>
          <offset_pitch>${offset_pitch}</offset_pitch>
          <offset_yaw>${offset_yaw}</offset_yaw>
          <offset_roll>${offset_roll}</offset_roll>
          <spawning_frame>${parent}</spawning_frame>
          <update_rate>${update_rate}</update_rate>
          <max_pitch_rate>${max_pitch_rate}</max_pitch_rate>
          <initial_on>${initial_on}</initial_on>
        </plugin>
      </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Macro to add a UV LED{-->
  <xacro:macro name="uvled_macro"
    params="namespace parent_link number frequency *origin">
    <link name="${namespace}_uvled_${number}_link">
      <visual>
        <origin xyz="0 0 -0.0025" rpy="0 0 0" />
        <geometry>
          <cylinder radius="0.007" length="0.005"/>
        </geometry>
      </visual>
    </link>
    <link name="${namespace}_uvled_${number}_electrodes_link">
      <visual>
        <origin xyz="0 0 -0.0025" rpy="0 0 0" />
        <geometry>
          <box size="0.001 0.02 0.001"/>
        </geometry>
      </visual>
    </link>
    <link name="${namespace}_uvled_${number}_lens_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <sphere  radius="0.005"/>
        </geometry>
      </visual>
      <inertial>
        <mass value="0.0001" /> <!-- [kg] -->
        <inertia ixx="0.0001" ixy="0.0" ixz="0.0" iyy="0.0001" iyz="0.0" izz="0.0001" />
      </inertial>
    </link>

    <joint name="${namespace}_uvled_${number}_lens_joint" type="fixed">
      <parent link="${parent_link}" />
      <xacro:insert_block name="origin" />
      <!-- <parent link="${namespace}_uvled_${number}_link" /> -->
      <child link="${namespace}_uvled_${number}_lens_link" />
    </joint>
    <joint name="${namespace}_uvled_${number}_joint" type="fixed">
      <parent link="${namespace}_uvled_${number}_lens_link" />
      <child link="${namespace}_uvled_${number}_link" />
    </joint>
    <joint name="${namespace}_uvled_${number}_electrodes_joint" type="fixed">
      <parent link="${namespace}_uvled_${number}_link" />
      <child link="${namespace}_uvled_${number}_electrodes_link" />
    </joint>

    <gazebo reference="${namespace}_uvled_${number}_lens_link">
      <sensor type="rfid" name="${namespace}_uvled_${number}_dummycam">
        <update_rate>1</update_rate>
        <plugin name='${namespace}_uvled_${number}_blinker' filename="libuvdar_led.so">
          <link_name>${namespace}_uvled_${number}_lens_link</link_name>
          <alwaysOn>false</alwaysOn>
          <updateRate>1</updateRate>
          <frequency>${frequency}</frequency>
          <number>${number}</number>
        </plugin>
      </sensor>
    </gazebo>

    <gazebo reference="${namespace}_uvled_${number}_lens_joint">
      <disableFixedJointLumping>true</disableFixedJointLumping>
      <preserveFixedJoint>true</preserveFixedJoint>
    </gazebo>

    <gazebo reference="${namespace}_uvled_${number}_lens_link">
      <material>Gazebo/BlueTransparent</material>
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- ================================================================== -->
  <!-- ||         other equipment definitions (holders, boxes ...)     || -->
  <!-- ================================================================== -->


  <!-- Macro to add a parachute {-->
  <xacro:macro name="parachute_macro" params="namespace name parent color offset_x offset_y offset_z *origin">
    <joint name="${name}_joint" type="fixed">
      <xacro:insert_block name="origin" />
      <parent link="${parent}" />
      <child link="${name}_link" />
    </joint>
    <link name="${name}_link" >
      <visual>
        <origin xyz="${offset_x} ${offset_y} ${offset_z}" rpy="0 0 0" />
        <geometry>
          <cylinder length="0.1" radius="0.048" />
        </geometry>
      </visual>
    </link>
    <gazebo reference="${name}_link">
      <material>Gazebo/${color}</material>
    </gazebo>
    <gazebo>
      <plugin name="parachute_plugin" filename="libparachute_plugin.so">
        <air_density>1.225</air_density>
        <drag_coeff>500</drag_coeff>
        <cross_section>0.25</cross_section> <!-- [m^2] -->
        <offset_x>0</offset_x>
        <offset_y>0</offset_y>
        <offset_z>-1.56</offset_z>
      </plugin>
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Macro to add a whycon box {-->
  <xacro:macro name="box_macro"
    params="robot_namespace name mesh_scale parent *origin">
    <joint name="${name}_joint" type="fixed">
      <xacro:insert_block name="origin" />
      <parent link="${parent}" />
      <child link="${name}_link" />
    </joint>
    <link name="${name}_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://mrs_robots_description/meshes/sensors/whycon_box.dae"
            scale="${mesh_scale}" />
        </geometry>
      </visual>
    </link>
    <gazebo reference="${name}_link">
    </gazebo>
  </xacro:macro>
  <!--}-->

  <!-- Macro to add a pendulum {-->
  <xacro:macro name="pendulum" params="parent">

    <joint name="body_2_pendulum_joint" type="fixed">
      <parent link="${parent}"/>
      <child link="pendulum_boom_0"/>
      <origin xyz="0.0 0.0 -0.15" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_0">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.3"/>
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 1 START -->

    <joint name="pendulum_ball_1_joint_0" type="fixed">
      <parent link="pendulum_boom_0"/>
      <child link="pendulum_ball_1_rod_1"/>
      <origin xyz="0.0 0.0 -0.15" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_1_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_1_joint_1" type="revolute">
      <parent link="pendulum_ball_1_rod_1"/>
      <child link="pendulum_ball_1_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_1_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_1_joint_2" type="revolute">
      <parent link="pendulum_ball_1_rod_2"/>
      <child link="pendulum_ball_1_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_1_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_1_joint_3" type="fixed">
      <parent link="pendulum_ball_1_rod_3"/>
      <child link="pendulum_boom_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <!-- ball joint 1 END -->

    <link name="pendulum_boom_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 2 beginning 1 3 -->

    <joint name="pendulum_ball_2_joint_0" type="fixed">
      <parent link="pendulum_boom_1"/>
      <child link="pendulum_ball_2_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_2_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_2_joint_1" type="revolute">
      <parent link="pendulum_ball_2_rod_1"/>
      <child link="pendulum_ball_2_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_2_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_2_joint_2" type="revolute">
      <parent link="pendulum_ball_2_rod_2"/>
      <child link="pendulum_ball_2_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_2_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_2_joint_3" type="fixed">
      <parent link="pendulum_ball_2_rod_3"/>
      <child link="pendulum_boom_2"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 2 ending -->


    <!-- ball joint 3 beginning 2 4 -->

    <joint name="pendulum_ball_3_joint_0" type="fixed">
      <parent link="pendulum_boom_2"/>
      <child link="pendulum_ball_3_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_3_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_3_joint_1" type="revolute">
      <parent link="pendulum_ball_3_rod_1"/>
      <child link="pendulum_ball_3_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_3_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_3_joint_2" type="revolute">
      <parent link="pendulum_ball_3_rod_2"/>
      <child link="pendulum_ball_3_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_3_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_3_joint_3" type="fixed">
      <parent link="pendulum_ball_3_rod_3"/>
      <child link="pendulum_boom_3"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 3 ending -->


    <!-- ball joint 4 beginning 3 5 -->

    <joint name="pendulum_ball_4_joint_0" type="fixed">
      <parent link="pendulum_boom_3"/>
      <child link="pendulum_ball_4_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_4_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_4_joint_1" type="revolute">
      <parent link="pendulum_ball_4_rod_1"/>
      <child link="pendulum_ball_4_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_4_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_4_joint_2" type="revolute">
      <parent link="pendulum_ball_4_rod_2"/>
      <child link="pendulum_ball_4_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_4_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_4_joint_3" type="fixed">
      <parent link="pendulum_ball_4_rod_3"/>
      <child link="pendulum_boom_4"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_4">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 4 ending -->


    <!-- ball joint 5 beginning 4 6 -->

    <joint name="pendulum_ball_5_joint_0" type="fixed">
      <parent link="pendulum_boom_4"/>
      <child link="pendulum_ball_5_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_5_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_5_joint_1" type="revolute">
      <parent link="pendulum_ball_5_rod_1"/>
      <child link="pendulum_ball_5_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_5_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_5_joint_2" type="revolute">
      <parent link="pendulum_ball_5_rod_2"/>
      <child link="pendulum_ball_5_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_5_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_5_joint_3" type="fixed">
      <parent link="pendulum_ball_5_rod_3"/>
      <child link="pendulum_boom_5"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_5">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 5 ending -->


    <!-- ball joint 6 beginning 5 7 -->

    <joint name="pendulum_ball_6_joint_0" type="fixed">
      <parent link="pendulum_boom_5"/>
      <child link="pendulum_ball_6_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_6_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_6_joint_1" type="revolute">
      <parent link="pendulum_ball_6_rod_1"/>
      <child link="pendulum_ball_6_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_6_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_6_joint_2" type="revolute">
      <parent link="pendulum_ball_6_rod_2"/>
      <child link="pendulum_ball_6_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_6_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_6_joint_3" type="fixed">
      <parent link="pendulum_ball_6_rod_3"/>
      <child link="pendulum_boom_6"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_6">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 6 ending -->


    <!-- ball joint 7 beginning 6 8 -->

    <joint name="pendulum_ball_7_joint_0" type="fixed">
      <parent link="pendulum_boom_6"/>
      <child link="pendulum_ball_7_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_7_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_7_joint_1" type="revolute">
      <parent link="pendulum_ball_7_rod_1"/>
      <child link="pendulum_ball_7_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_7_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_7_joint_2" type="revolute">
      <parent link="pendulum_ball_7_rod_2"/>
      <child link="pendulum_ball_7_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_7_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_7_joint_3" type="fixed">
      <parent link="pendulum_ball_7_rod_3"/>
      <child link="pendulum_boom_7"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_7">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 7 ending -->


    <!-- ball joint 8 beginning 7 9 -->

    <joint name="pendulum_ball_8_joint_0" type="fixed">
      <parent link="pendulum_boom_7"/>
      <child link="pendulum_ball_8_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_8_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_8_joint_1" type="revolute">
      <parent link="pendulum_ball_8_rod_1"/>
      <child link="pendulum_ball_8_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_8_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_8_joint_2" type="revolute">
      <parent link="pendulum_ball_8_rod_2"/>
      <child link="pendulum_ball_8_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_8_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_8_joint_3" type="fixed">
      <parent link="pendulum_ball_8_rod_3"/>
      <child link="pendulum_boom_8"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_8">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 8 ending -->


    <!-- ball joint 9 beginning 8 10 -->

    <joint name="pendulum_ball_9_joint_0" type="fixed">
      <parent link="pendulum_boom_8"/>
      <child link="pendulum_ball_9_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_9_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_9_joint_1" type="revolute">
      <parent link="pendulum_ball_9_rod_1"/>
      <child link="pendulum_ball_9_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_9_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_9_joint_2" type="revolute">
      <parent link="pendulum_ball_9_rod_2"/>
      <child link="pendulum_ball_9_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_9_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_9_joint_3" type="fixed">
      <parent link="pendulum_ball_9_rod_3"/>
      <child link="pendulum_boom_9"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_9">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 9 ending -->


    <!-- ball joint 10 beginning 9 11 -->

    <joint name="pendulum_ball_10_joint_0" type="fixed">
      <parent link="pendulum_boom_9"/>
      <child link="pendulum_ball_10_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_10_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_10_joint_1" type="revolute">
      <parent link="pendulum_ball_10_rod_1"/>
      <child link="pendulum_ball_10_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_10_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_10_joint_2" type="revolute">
      <parent link="pendulum_ball_10_rod_2"/>
      <child link="pendulum_ball_10_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_10_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_10_joint_3" type="fixed">
      <parent link="pendulum_ball_10_rod_3"/>
      <child link="pendulum_boom_10"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_10">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 10 ending -->


    <!-- ball joint 11 beginning 10 12 -->

    <joint name="pendulum_ball_11_joint_0" type="fixed">
      <parent link="pendulum_boom_10"/>
      <child link="pendulum_ball_11_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_11_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_11_joint_1" type="revolute">
      <parent link="pendulum_ball_11_rod_1"/>
      <child link="pendulum_ball_11_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_11_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_11_joint_2" type="revolute">
      <parent link="pendulum_ball_11_rod_2"/>
      <child link="pendulum_ball_11_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_11_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_11_joint_3" type="fixed">
      <parent link="pendulum_ball_11_rod_3"/>
      <child link="pendulum_boom_11"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_11">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 11 ending -->


    <!-- ball joint 12 beginning 11 13 -->

    <joint name="pendulum_ball_12_joint_0" type="fixed">
      <parent link="pendulum_boom_11"/>
      <child link="pendulum_ball_12_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_12_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_12_joint_1" type="revolute">
      <parent link="pendulum_ball_12_rod_1"/>
      <child link="pendulum_ball_12_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_12_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_12_joint_2" type="revolute">
      <parent link="pendulum_ball_12_rod_2"/>
      <child link="pendulum_ball_12_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_12_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_12_joint_3" type="fixed">
      <parent link="pendulum_ball_12_rod_3"/>
      <child link="pendulum_boom_12"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_12">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 12 ending -->


    <!-- ball joint 13 beginning 12 14 -->

    <joint name="pendulum_ball_13_joint_0" type="fixed">
      <parent link="pendulum_boom_12"/>
      <child link="pendulum_ball_13_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_13_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_13_joint_1" type="revolute">
      <parent link="pendulum_ball_13_rod_1"/>
      <child link="pendulum_ball_13_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_13_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_13_joint_2" type="revolute">
      <parent link="pendulum_ball_13_rod_2"/>
      <child link="pendulum_ball_13_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_13_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_13_joint_3" type="fixed">
      <parent link="pendulum_ball_13_rod_3"/>
      <child link="pendulum_boom_13"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_13">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 13 ending -->


    <!-- ball joint 14 beginning 13 15 -->

    <joint name="pendulum_ball_14_joint_0" type="fixed">
      <parent link="pendulum_boom_13"/>
      <child link="pendulum_ball_14_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_14_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_14_joint_1" type="revolute">
      <parent link="pendulum_ball_14_rod_1"/>
      <child link="pendulum_ball_14_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_14_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_14_joint_2" type="revolute">
      <parent link="pendulum_ball_14_rod_2"/>
      <child link="pendulum_ball_14_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_14_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_14_joint_3" type="fixed">
      <parent link="pendulum_ball_14_rod_3"/>
      <child link="pendulum_boom_14"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_14">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 14 ending -->


    <!-- ball joint 15 beginning 14 16 -->

    <joint name="pendulum_ball_15_joint_0" type="fixed">
      <parent link="pendulum_boom_14"/>
      <child link="pendulum_ball_15_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_15_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_15_joint_1" type="revolute">
      <parent link="pendulum_ball_15_rod_1"/>
      <child link="pendulum_ball_15_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_15_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_15_joint_2" type="revolute">
      <parent link="pendulum_ball_15_rod_2"/>
      <child link="pendulum_ball_15_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_15_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_15_joint_3" type="fixed">
      <parent link="pendulum_ball_15_rod_3"/>
      <child link="pendulum_boom_15"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_15">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 15 ending -->


    <!-- ball joint 16 beginning 15 17 -->

    <joint name="pendulum_ball_16_joint_0" type="fixed">
      <parent link="pendulum_boom_15"/>
      <child link="pendulum_ball_16_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_16_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_16_joint_1" type="revolute">
      <parent link="pendulum_ball_16_rod_1"/>
      <child link="pendulum_ball_16_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_16_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_16_joint_2" type="revolute">
      <parent link="pendulum_ball_16_rod_2"/>
      <child link="pendulum_ball_16_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_16_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_16_joint_3" type="fixed">
      <parent link="pendulum_ball_16_rod_3"/>
      <child link="pendulum_boom_16"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_16">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 16 ending -->


    <!-- ball joint 17 beginning 16 18 -->

    <joint name="pendulum_ball_17_joint_0" type="fixed">
      <parent link="pendulum_boom_16"/>
      <child link="pendulum_ball_17_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_17_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_17_joint_1" type="revolute">
      <parent link="pendulum_ball_17_rod_1"/>
      <child link="pendulum_ball_17_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_17_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_17_joint_2" type="revolute">
      <parent link="pendulum_ball_17_rod_2"/>
      <child link="pendulum_ball_17_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_17_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_17_joint_3" type="fixed">
      <parent link="pendulum_ball_17_rod_3"/>
      <child link="pendulum_boom_17"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_17">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 17 ending -->


    <!-- ball joint 18 beginning 17 19 -->

    <joint name="pendulum_ball_18_joint_0" type="fixed">
      <parent link="pendulum_boom_17"/>
      <child link="pendulum_ball_18_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_18_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_18_joint_1" type="revolute">
      <parent link="pendulum_ball_18_rod_1"/>
      <child link="pendulum_ball_18_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_18_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_18_joint_2" type="revolute">
      <parent link="pendulum_ball_18_rod_2"/>
      <child link="pendulum_ball_18_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_18_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_18_joint_3" type="fixed">
      <parent link="pendulum_ball_18_rod_3"/>
      <child link="pendulum_boom_18"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_18">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 18 ending -->


    <!-- ball joint 19 beginning 18 20 -->

    <joint name="pendulum_ball_19_joint_0" type="fixed">
      <parent link="pendulum_boom_18"/>
      <child link="pendulum_ball_19_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_19_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_19_joint_1" type="revolute">
      <parent link="pendulum_ball_19_rod_1"/>
      <child link="pendulum_ball_19_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_19_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_19_joint_2" type="revolute">
      <parent link="pendulum_ball_19_rod_2"/>
      <child link="pendulum_ball_19_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_19_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_19_joint_3" type="fixed">
      <parent link="pendulum_ball_19_rod_3"/>
      <child link="pendulum_boom_19"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_19">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 19 ending -->


    <!-- ball joint 20 beginning 19 21 -->

    <joint name="pendulum_ball_20_joint_0" type="fixed">
      <parent link="pendulum_boom_19"/>
      <child link="pendulum_ball_20_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_20_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_20_joint_1" type="revolute">
      <parent link="pendulum_ball_20_rod_1"/>
      <child link="pendulum_ball_20_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_20_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_20_joint_2" type="revolute">
      <parent link="pendulum_ball_20_rod_2"/>
      <child link="pendulum_ball_20_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_20_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_20_joint_3" type="fixed">
      <parent link="pendulum_ball_20_rod_3"/>
      <child link="pendulum_boom_20"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_20">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 20 ending -->


    <!-- ball joint 21 beginning 20 22 -->

    <joint name="pendulum_ball_21_joint_0" type="fixed">
      <parent link="pendulum_boom_20"/>
      <child link="pendulum_ball_21_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_21_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_21_joint_1" type="revolute">
      <parent link="pendulum_ball_21_rod_1"/>
      <child link="pendulum_ball_21_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_21_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_21_joint_2" type="revolute">
      <parent link="pendulum_ball_21_rod_2"/>
      <child link="pendulum_ball_21_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_21_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_21_joint_3" type="fixed">
      <parent link="pendulum_ball_21_rod_3"/>
      <child link="pendulum_boom_21"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_21">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 21 ending -->


    <!-- ball joint 22 beginning 21 23 -->

    <joint name="pendulum_ball_22_joint_0" type="fixed">
      <parent link="pendulum_boom_21"/>
      <child link="pendulum_ball_22_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_22_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_22_joint_1" type="revolute">
      <parent link="pendulum_ball_22_rod_1"/>
      <child link="pendulum_ball_22_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_22_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_22_joint_2" type="revolute">
      <parent link="pendulum_ball_22_rod_2"/>
      <child link="pendulum_ball_22_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_22_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_22_joint_3" type="fixed">
      <parent link="pendulum_ball_22_rod_3"/>
      <child link="pendulum_boom_22"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_22">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 22 ending -->


    <!-- ball joint 23 beginning 22 24 -->

    <joint name="pendulum_ball_23_joint_0" type="fixed">
      <parent link="pendulum_boom_22"/>
      <child link="pendulum_ball_23_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_23_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_23_joint_1" type="revolute">
      <parent link="pendulum_ball_23_rod_1"/>
      <child link="pendulum_ball_23_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_23_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_23_joint_2" type="revolute">
      <parent link="pendulum_ball_23_rod_2"/>
      <child link="pendulum_ball_23_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_23_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_23_joint_3" type="fixed">
      <parent link="pendulum_ball_23_rod_3"/>
      <child link="pendulum_boom_23"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_23">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 23 ending -->


    <!-- ball joint 24 beginning 23 25 -->

    <joint name="pendulum_ball_24_joint_0" type="fixed">
      <parent link="pendulum_boom_23"/>
      <child link="pendulum_ball_24_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_24_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_24_joint_1" type="revolute">
      <parent link="pendulum_ball_24_rod_1"/>
      <child link="pendulum_ball_24_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_24_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_24_joint_2" type="revolute">
      <parent link="pendulum_ball_24_rod_2"/>
      <child link="pendulum_ball_24_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_24_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_24_joint_3" type="fixed">
      <parent link="pendulum_ball_24_rod_3"/>
      <child link="pendulum_boom_24"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_24">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 24 ending -->


    <!-- ball joint 25 beginning 24 26 -->

    <joint name="pendulum_ball_25_joint_0" type="fixed">
      <parent link="pendulum_boom_24"/>
      <child link="pendulum_ball_25_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_25_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_25_joint_1" type="revolute">
      <parent link="pendulum_ball_25_rod_1"/>
      <child link="pendulum_ball_25_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_25_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_25_joint_2" type="revolute">
      <parent link="pendulum_ball_25_rod_2"/>
      <child link="pendulum_ball_25_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_25_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_25_joint_3" type="fixed">
      <parent link="pendulum_ball_25_rod_3"/>
      <child link="pendulum_boom_25"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_25">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 25 ending -->


    <!-- ball joint 26 beginning 25 27 -->

    <joint name="pendulum_ball_26_joint_0" type="fixed">
      <parent link="pendulum_boom_25"/>
      <child link="pendulum_ball_26_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_26_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_26_joint_1" type="revolute">
      <parent link="pendulum_ball_26_rod_1"/>
      <child link="pendulum_ball_26_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_26_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_26_joint_2" type="revolute">
      <parent link="pendulum_ball_26_rod_2"/>
      <child link="pendulum_ball_26_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_26_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_26_joint_3" type="fixed">
      <parent link="pendulum_ball_26_rod_3"/>
      <child link="pendulum_boom_26"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_26">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 26 ending -->


    <!-- ball joint 27 beginning 26 28 -->

    <joint name="pendulum_ball_27_joint_0" type="fixed">
      <parent link="pendulum_boom_26"/>
      <child link="pendulum_ball_27_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_27_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_27_joint_1" type="revolute">
      <parent link="pendulum_ball_27_rod_1"/>
      <child link="pendulum_ball_27_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_27_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_27_joint_2" type="revolute">
      <parent link="pendulum_ball_27_rod_2"/>
      <child link="pendulum_ball_27_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_27_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_27_joint_3" type="fixed">
      <parent link="pendulum_ball_27_rod_3"/>
      <child link="pendulum_boom_27"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_27">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 27 ending -->


    <!-- ball joint 28 beginning 27 29 -->

    <joint name="pendulum_ball_28_joint_0" type="fixed">
      <parent link="pendulum_boom_27"/>
      <child link="pendulum_ball_28_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_28_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_28_joint_1" type="revolute">
      <parent link="pendulum_ball_28_rod_1"/>
      <child link="pendulum_ball_28_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_28_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_28_joint_2" type="revolute">
      <parent link="pendulum_ball_28_rod_2"/>
      <child link="pendulum_ball_28_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_28_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_28_joint_3" type="fixed">
      <parent link="pendulum_ball_28_rod_3"/>
      <child link="pendulum_boom_28"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_28">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 28 ending -->


    <!-- ball joint 29 beginning 28 30 -->

    <joint name="pendulum_ball_29_joint_0" type="fixed">
      <parent link="pendulum_boom_28"/>
      <child link="pendulum_ball_29_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_29_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_29_joint_1" type="revolute">
      <parent link="pendulum_ball_29_rod_1"/>
      <child link="pendulum_ball_29_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_29_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_29_joint_2" type="revolute">
      <parent link="pendulum_ball_29_rod_2"/>
      <child link="pendulum_ball_29_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_29_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_29_joint_3" type="fixed">
      <parent link="pendulum_ball_29_rod_3"/>
      <child link="pendulum_boom_29"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_29">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 29 ending -->


    <!-- ball joint 30 beginning 29 31 -->

    <joint name="pendulum_ball_30_joint_0" type="fixed">
      <parent link="pendulum_boom_29"/>
      <child link="pendulum_ball_30_rod_1"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_30_rod_1">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_30_joint_1" type="revolute">
      <parent link="pendulum_ball_30_rod_1"/>
      <child link="pendulum_ball_30_rod_2"/>
      <axis xyz="1 0 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_30_rod_2">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 -0.005" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_30_joint_2" type="revolute">
      <parent link="pendulum_ball_30_rod_2"/>
      <child link="pendulum_ball_30_rod_3"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.0" friction="0.0"/>
      <limit upper="3.1415" lower="-3.1415" effort="-1" velocity="-1" />
      <origin xyz="0.0 0.0 -0.01" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_ball_30_rod_3">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.001" h="0.01" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.001" length="0.01" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <joint name="pendulum_ball_30_joint_3" type="fixed">
      <parent link="pendulum_ball_30_rod_3"/>
      <child link="pendulum_boom_30"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="pendulum_boom_30">
      <inertial>
        <mass value="0.002" />
        <xacro:cylinder_inertia m="0.002" r="0.01" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.01" length="0.2" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

    <!-- ball joint 30 ending -->

    <joint name="second_joint4" type="fixed">
      <parent link="pendulum_boom_30"/>
      <child link="payload"/>
      <origin xyz="0.0 0.0 -0.1" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="payload">
      <inertial>
        <mass value="0.5" />
        <xacro:cylinder_inertia m="0.5" r="0.05" h="0.2" />
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="0.05" length="0.1" />
        </geometry>
        <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      </visual>
    </link>

  </xacro:macro>
  <!--}-->

  <!-- Macro to add a ball_holder {-->
  <xacro:macro name="ball_holder" params="parent">

    <joint name="ball_holder_spherical_joint_part1" type="revolute">
        <parent link="${parent}"/>
        <child link="ball_holder_spherical_joint_helper_link1"/>
        <axis xyz="1 0 0"/>
        <dynamics damping="0.05" friction="0.9"/>
        <limit upper="3.1415" lower="-3.1415" effort="1" velocity="2" />
        <origin xyz="0.0 0.0 -0.03" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="ball_holder_spherical_joint_helper_link1">
        <inertial>
            <mass value="1e-3" />
            <inertia ixx="1e-5" ixy="0.0" ixz="0.0" iyy="1e-5" iyz="0.0" izz="1e-5"/>
        </inertial>
    </link>

    <joint name="ball_holder_spherical_joint_part2" type="revolute">
        <parent link="ball_holder_spherical_joint_helper_link1"/>
        <child link="ball_holder_spherical_joint_helper_link2"/>
        <axis xyz="0 1 0"/>
        <dynamics damping="0.05" friction="0.05"/>
        <limit upper="3.1415" lower="-3.1415" effort="1" velocity="2" />
        <origin xyz="0.0 0.0 -0.031" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="ball_holder_spherical_joint_helper_link2">
        <inertial>
            <mass value="1e-3" />
            <inertia ixx="1e-5" ixy="0.0" ixz="0.0" iyy="1e-5" iyz="0.0" izz="1e-5"/>
        </inertial>
    </link>

    <joint name="ball_holder_rod_joint" type="fixed">
        <parent link="ball_holder_spherical_joint_helper_link2"/>
        <child link="ball_holder_rod"/>
        <origin xyz="0.0 0.0 -0.53" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="ball_holder_rod">
        <inertial>
            <mass value="0.025" />
            <inertia ixx="0.00004712" ixy="0.0" ixz="0.0" iyy="0.00004712" iyz="0.0" izz="0.00000112"/>
        </inertial>
        <visual>
            <geometry>
                <cylinder radius="0.0075" length="1" />
            </geometry>
            <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0" />
        </visual>
    </link>

    <joint name="ball_holder2_spherical_joint_part1" type="revolute">
        <parent link="ball_holder_rod"/>
        <child link="ball_holder2_spherical_joint_helper_link1"/>
        <axis xyz="1 0 0"/>
        <dynamics damping="0.05" friction="0.05"/>
        <limit upper="3.1415" lower="-3.1415" effort="1" velocity="2" />
        <origin xyz="0.0 0.0 -0.03" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="ball_holder2_spherical_joint_helper_link1">
        <inertial>
            <mass value="1e-3" />
            <inertia ixx="1e-5" ixy="0.0" ixz="0.0" iyy="1e-5" iyz="0.0" izz="1e-5"/>
        </inertial>
    </link>

    <joint name="ball_holder2_spherical_joint_part2" type="revolute">
        <parent link="ball_holder2_spherical_joint_helper_link1"/>
        <child link="ball_holder2_spherical_joint_helper_link2"/>
        <axis xyz="0 1 0"/>
        <dynamics damping="0.05" friction="0.05"/>
        <limit upper="3.1415" lower="-3.1415" effort="1" velocity="2" />
        <origin xyz="0.0 0.0 -0.031" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="ball_holder2_spherical_joint_helper_link2">
        <inertial>
            <mass value="1e-3" />
            <inertia ixx="1e-5" ixy="0.0" ixz="0.0" iyy="1e-5" iyz="0.0" izz="1e-5"/>
        </inertial>
    </link>

    <joint name="ball_holder2_rod_joint" type="fixed">
        <parent link="ball_holder2_spherical_joint_helper_link2"/>
        <child link="ball_holder2_rod"/>
        <origin xyz="0.0 0.0 -0.79" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="ball_holder2_rod">
        <inertial>
            <mass value="0.025" />
            <inertia ixx="0.00004712" ixy="0.0" ixz="0.0" iyy="0.00004712" iyz="0.0" izz="0.00000112"/>
        </inertial>
        <visual>
            <geometry>
                <cylinder radius="0.0075" length="0.450" />
            </geometry>
            <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0" />
        </visual>
    </link>

    <joint name="ball_holder_ball_joint" type="revolute">
        <parent link="ball_holder2_rod"/>
        <child link="ball_holder_ball"/>
        <axis xyz="0 1 0"/>
        <dynamics damping="0.05" friction="0.08"/>
        <limit upper="0" lower="0" effort="0" velocity="0" />
        <origin xyz="0.0 0.0 -0.225" rpy="0.0 0.0 0.0"/>
    </joint>

    <link name="ball_holder_ball">
        <inertial>
            <mass value="0.1" />
            <inertia ixx="0.00000012" ixy="0.0" ixz="0.0" iyy="0.00000012" iyz="0.0" izz="0.00000012"/>
        </inertial>
        <visual>
            <geometry>
                <sphere radius="0.055"/>
            </geometry>
        </visual>
      </link>
    <gazebo reference="ball_holder_ball">
      <material>Gazebo/Yellow</material>
    </gazebo>

  </xacro:macro>
  <!--}-->

</robot>
